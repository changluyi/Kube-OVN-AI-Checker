# ğŸ“š Kube-OVN-LangGraph-Checker ç»¼åˆæ–‡æ¡£ä½“ç³»åˆ›å»ºè®¡åˆ’

> **åˆ›å»ºæ—¥æœŸ**: 2026-01-11
> **è®¡åˆ’ç±»å‹**: æ–‡æ¡£åˆ›å»º (docs)
> **ä¼˜å…ˆçº§**: P0 - é˜»å¡ç”¨æˆ·ä½¿ç”¨å’Œé¡¹ç›®å‘å±•
> **é¢„è®¡å·¥æœŸ**: 6-8 å‘¨ï¼ˆåˆ†é˜¶æ®µå®æ–½ï¼‰

---

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

### é—®é¢˜é™ˆè¿°

å½“å‰ `kube-ovn-langgraph-checker` é¡¹ç›®é¢ä¸´ä¸¥é‡çš„æ–‡æ¡£ç¼ºå¤±é—®é¢˜ï¼š

- âŒ **ä½¿ç”¨æ–‡æ¡£ç©ºç™½**ï¼šæ–°ç”¨æˆ·æ— æ³•é¡ºåˆ©å®‰è£…é…ç½®ï¼Œé‡åˆ°é”™è¯¯æ— æ³•è‡ªåŠ©è§£å†³
- âŒ **æ¶æ„æ–‡æ¡£ä¸å®Œæ•´**ï¼šç¼ºå°‘ç³»ç»Ÿæ¶æ„å›¾ã€è¯Šæ–­æµç¨‹è¯´æ˜ã€å·¥å…·æœºåˆ¶è§£é‡Š
- âŒ **å¼€å‘è€…æ–‡æ¡£ç¼ºå¤±**ï¼šè´¡çŒ®è€…æ— æ³•å¿«é€Ÿä¸Šæ‰‹ï¼Œæ‰©å±•æˆæœ¬é«˜
- âœ… **çŸ¥è¯†åº“å®Œæ•´**ï¼š16 ä¸ªæŠ€æœ¯åŸç†æ–‡æ¡£è´¨é‡ä¼˜ç§€

### è§£å†³æ–¹æ¡ˆ

åˆ›å»ºä¸‰ä»½æ ¸å¿ƒæ–‡æ¡£ï¼Œæ„å»ºå®Œæ•´çš„æ–‡æ¡£ä½“ç³»ï¼š

1. **ğŸ“– ç”¨æˆ·ä½¿ç”¨æ–‡æ¡£** (User Guide) - é¢å‘ SRE/è¿ç»´äººå‘˜
2. **ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ–‡æ¡£** (Architecture) - é¢å‘æŠ€æœ¯å†³ç­–è€…
3. **ğŸ’» è¯¦ç»†å®ç°æ–‡æ¡£** (Implementation) - é¢å‘å¼€å‘è€…å’Œè´¡çŒ®è€…

### æˆåŠŸæ ‡å‡†

- **æ–°ç”¨æˆ·å®‰è£…æˆåŠŸç‡** > 90%ï¼ˆæ— éœ€äººå·¥æ”¯æŒï¼‰
- **é”™è¯¯è‡ªåŠ©è§£å†³ç‡** > 70%ï¼ˆé€šè¿‡æ–‡æ¡£è§£å†³ï¼‰
- **å¼€å‘è€…ä¸Šæ‰‹æ—¶é—´** < 2 å°æ—¶
- **æ–‡æ¡£è¦†ç›–ç‡** 100%ï¼ˆæ‰€æœ‰åŠŸèƒ½éƒ½æœ‰æ–‡æ¡£ï¼‰

---

## ğŸ¯ ç›®æ ‡å—ä¼—åˆ†æ

### ä¸»è¦ç”¨æˆ·ç¾¤ä½“

| ç”¨æˆ·ç±»å‹ | è§’è‰² | æŠ€èƒ½æ°´å¹³ | æ ¸å¿ƒéœ€æ±‚ | ä½¿ç”¨é¢‘ç‡ |
|---------|------|---------|---------|---------|
| **SRE/è¿ç»´äººå‘˜** | ç”Ÿäº§æ•…éšœå“åº” | K8s ç†Ÿæ‚‰ï¼ŒLLM ä¸ç†Ÿæ‚‰ | å¿«é€Ÿè¯Šæ–­ã€å¯æ‰§è¡Œå»ºè®® | æ¯æ—¥ |
| **Kube-OVN å¼€å‘è€…** | ç”¨æˆ·æ”¯æŒã€å·¥å…·æ‰©å±• | Kube-OVN ç†Ÿæ‚‰ï¼Œæœ‰å¼€å‘èƒ½åŠ› | ç†è§£åŸç†ã€æ‰©å±•å·¥å…· | æ¯å‘¨ |
| **å¹³å°ç®¡ç†å‘˜** | éƒ¨ç½²ã€é…ç½®ã€ç›‘æ§ | K8s ç®¡ç†ç»éªŒ | å®‰è£…é…ç½®ã€æƒé™ç®¡ç† | ä¸€æ¬¡æ€§ |
| **è´¡çŒ®è€…** | ä»£ç è´¡çŒ®ã€æ–‡æ¡£æ”¹è¿› | Python å¼€å‘ç»éªŒ | æ¶æ„ç†è§£ã€å¼€å‘æŒ‡å— | æŒç»­ |

### ç”¨æˆ·æ—…ç¨‹æ˜ å°„

```mermaid
journey
    title SRE è¿ç»´äººå‘˜å®Œæ•´ä½¿ç”¨æ—…ç¨‹
    section é¦–æ¬¡ä½¿ç”¨
      å‘ç°å·¥å…·: 5: ç”¨æˆ·
      é˜…è¯»æ–‡æ¡£: 3: ç”¨æˆ·
      å®‰è£…é…ç½®: 2: ç”¨æˆ·
      é¦–æ¬¡è¯Šæ–­: 4: ç”¨æˆ·
    section æ—¥å¸¸ä½¿ç”¨
      é‡åˆ°æ•…éšœ: 5: ç”¨æˆ·
      è¿è¡Œè¯Šæ–­: 4: ç”¨æˆ·
      æŸ¥çœ‹ç»“æœ: 4: ç”¨æˆ·
      å®æ–½ä¿®å¤: 3: ç”¨æˆ·
    section é«˜çº§åœºæ™¯
      æ‰©å±•å·¥å…·: 2: ç”¨æˆ·
      è´¡çŒ®ä»£ç : 2: ç”¨æˆ·
```

---

## ğŸ“š æ–‡æ¡£ä¸€ï¼šç”¨æˆ·ä½¿ç”¨æ–‡æ¡£ (User Guide)

### ç›®æ ‡
å¸®åŠ© SRE/è¿ç»´äººå‘˜å¿«é€Ÿå®‰è£…ã€é…ç½®ã€ä½¿ç”¨å·¥å…·ï¼Œå¹¶åœ¨é‡åˆ°é—®é¢˜æ—¶èƒ½å¤Ÿè‡ªåŠ©è§£å†³ã€‚

### é‡‡ç”¨æ¡†æ¶
**DiÃ¡taxis æ¡†æ¶** - æ•™ç¨‹ã€æ“ä½œæŒ‡å—ã€å‚è€ƒã€è§£é‡Šå››ç±»åˆ†ç¦»

### æ–‡æ¡£ç»“æ„

```
docs/user-guide/
â”œâ”€â”€ README.md                      # å¯¼èˆªæ–‡æ¡£
â”œâ”€â”€ quick-start.md                 # 5 åˆ†é’Ÿå¿«é€Ÿå¼€å§‹ â­ P0
â”œâ”€â”€ installation.md                # å®Œæ•´å®‰è£…æŒ‡å— â­ P0
â”œâ”€â”€ configuration.md               # é…ç½®è¯¦è§£ â­ P0
â”œâ”€â”€ diagnosis-basics.md            # è¯Šæ–­åŸºç¡€ â­ P1
â”œâ”€â”€ understanding-results.md       # ç»“æœè§£è¯» â­ P1
â”œâ”€â”€ troubleshooting.md             # æ•…éšœæ’é™¤ â­ P0
â”œâ”€â”€ faq.md                         # å¸¸è§é—®é¢˜ â­ P1
â”œâ”€â”€ advanced-usage.md              # é«˜çº§ç”¨æ³• â­ P2
â”œâ”€â”€ security-considerations.md     # å®‰å…¨è€ƒè™‘ â­ P1
â””â”€â”€ examples/                      # çœŸå®æ¡ˆä¾‹åº“
    â”œâ”€â”€ pod-pending.md             # Pod Pending é—®é¢˜
    â”œâ”€â”€ network-connectivity.md    # ç½‘ç»œè¿é€šæ€§é—®é¢˜
    â”œâ”€â”€ ip-exhaustion.md           # IP è€—å°½é—®é¢˜
    â”œâ”€â”€ controller-crashloop.md    # Controller é‡å¯
    â””â”€â”€ node-network-failure.md    # èŠ‚ç‚¹ç½‘ç»œæ•…éšœ
```

### æ ¸å¿ƒå†…å®¹è¦ç‚¹

#### 1. quick-start.md (P0 - é˜»å¡æ–°ç”¨æˆ·)

**ç›®æ ‡**ï¼š5 åˆ†é’Ÿå†…è®©ç”¨æˆ·è¿è¡Œç¬¬ä¸€æ¬¡è¯Šæ–­

**å†…å®¹ç»“æ„**ï¼š
```markdown
# ğŸš€ å¿«é€Ÿå¼€å§‹

## å‰ç½®è¦æ±‚
- Python 3.9+
- kubectl å·²é…ç½®
- OpenAI API Key æˆ–å…¼å®¹æœåŠ¡

## 5 æ­¥å¿«é€Ÿä½“éªŒ

### æ­¥éª¤ 1: å…‹éš†ä»“åº“
\```bash
git clone https://github.com/xxx/kube-ovn-langgraph-checker.git
cd kube-ovn-langgraph-checker
\```

### æ­¥éª¤ 2: å®‰è£…ä¾èµ–
\```bash
pip install -e .
\```

### æ­¥éª¤ 3: é…ç½® API Key
\```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Key
\```

### æ­¥éª¤ 4: éªŒè¯å®‰è£…
\```bash
./kube-ovn-checker --help
\```

### æ­¥éª¤ 5: ç¬¬ä¸€æ¬¡è¯Šæ–­
\```bash
./kube-ovn-checker "å¸®æˆ‘æ£€æŸ¥ kube-ovn-controller çš„çŠ¶æ€"
\```

## é¢„æœŸè¾“å‡º
[å±•ç¤ºçœŸå®çš„è¯Šæ–­è¾“å‡ºæˆªå›¾]

## ä¸‹ä¸€æ­¥
- é˜…è¯»å®Œæ•´å®‰è£…æŒ‡å—
- æŸ¥çœ‹é…ç½®é€‰é¡¹
- äº†è§£è¯Šæ–­åŸºç¡€
```

**å…³é”®å…ƒç´ **ï¼š
- âœ… å¯éªŒè¯çš„å‘½ä»¤ï¼ˆæ¯ä¸ªéƒ½ç»è¿‡æµ‹è¯•ï¼‰
- âœ… çœŸå®çš„è¾“å‡ºç¤ºä¾‹
- âœ… æ¸…æ™°çš„æˆåŠŸæ ‡å‡†
- âœ… å¤±è´¥æ—¶çš„æç¤º

---

#### 2. installation.md (P0 - é˜»å¡å®‰è£…)

**ç›®æ ‡**ï¼šè¯¦ç»†çš„å®‰è£…æŒ‡å—ï¼ŒåŒ…å«æ‰€æœ‰ç¯å¢ƒå’Œåœºæ™¯

**å†…å®¹ç»“æ„**ï¼š
```markdown
# ğŸ“¦ å®‰è£…æŒ‡å—

## ç³»ç»Ÿè¦æ±‚
### æœ€ä½è¦æ±‚
- Python 3.9 æˆ–æ›´é«˜
- 500MB å¯ç”¨å†…å­˜
- å¯¹ Kubernetes é›†ç¾¤çš„åªè¯»è®¿é—®æƒé™

### æ¨èé…ç½®
- Python 3.11+
- 2GB å¯ç”¨å†…å­˜
- ç¨³å®šçš„ç½‘ç»œè¿æ¥ï¼ˆè®¿é—® LLM APIï¼‰

## å®‰è£…æ–¹æ³•

### æ–¹æ³• 1: pip å®‰è£…ï¼ˆæ¨èï¼‰
\```bash
pip install kube-ovn-checker
\```

### æ–¹æ³• 2: ä»æºç å®‰è£…ï¼ˆå¼€å‘æ¨¡å¼ï¼‰
\```bash
git clone <repo>
cd kube-ovn-langgraph-checker
pip install -e .
\```

### æ–¹æ³• 3: Docker å®¹å™¨ï¼ˆå¯é€‰ï¼‰
\```bash
docker build -t kube-ovn-checker .
docker run -v ~/.kube:/root/.kube kube-ovn-checker
\```

## ç¯å¢ƒéªŒè¯

### éªŒè¯ Python ç‰ˆæœ¬
\```bash
python --version  # åº”è¯¥ >= 3.9
\```

### éªŒè¯ kubectl é…ç½®
\```bash
kubectl cluster-info
kubectl get nodes
\```

### éªŒè¯ API Key
\```bash
curl https://api.openai.com/v1/models \
  -H "Authorization: Bearer $OPENAI_API_KEY"
\```

## å¸¸è§å®‰è£…é—®é¢˜

### é—®é¢˜ 1: ä¾èµ–å®‰è£…å¤±è´¥
**ç—‡çŠ¶**: `pip install` æŠ¥é”™
**è§£å†³æ–¹æ¡ˆ**:
1. ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
2. å‡çº§ pip: `pip install --upgrade pip`
3. ä½¿ç”¨å›½å†…é•œåƒ: `pip install -i https://pypi.tuna.tsinghua.edu.cn/simple`

### é—®é¢˜ 2: æƒé™ä¸è¶³
**ç—‡çŠ¶**: `Permission denied`
**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨ `--user` æ ‡å¿—æˆ–è™šæ‹Ÿç¯å¢ƒ

## å¸è½½
\```bash
pip uninstall kube-ovn-checker
\```

## å‡çº§
\```bash
pip install --upgrade kube-ovn-checker
\```
```

---

#### 3. configuration.md (P0 - é˜»å¡é…ç½®)

**ç›®æ ‡**ï¼šå®Œæ•´çš„é…ç½®æŒ‡å—ï¼ŒåŒ…å«æ‰€æœ‰ LLM æä¾›å•†

**å†…å®¹ç»“æ„**ï¼š
```markdown
# âš™ï¸ é…ç½®æŒ‡å—

## ç¯å¢ƒå˜é‡é…ç½®

### æ ¸å¿ƒé…ç½®

#### OPENAI_API_KEY (å¿…éœ€)
LLM æœåŠ¡çš„ API å¯†é’¥ã€‚

**è·å–æ–¹å¼**:
- OpenAI: https://platform.openai.com/api-keys
- Azure OpenAI: åœ¨ Azure Portal åˆ›å»º
- DeepSeek: https://platform.deepseek.com/
- æ™ºè°± AI: https://open.bigmodel.cn/

**ç¤ºä¾‹**:
\```bash
export OPENAI_API_KEY="sk-..."
\```

#### OPENAI_API_BASE (å¯é€‰)
è‡ªå®šä¹‰ API ç«¯ç‚¹ï¼Œç”¨äºå…¼å®¹æœåŠ¡ã€‚

**æ”¯æŒçš„æä¾›å•†**:

| æä¾›å•† | Base URL | æ¨¡å‹ç¤ºä¾‹ |
|-------|---------|---------|
| OpenAI | `https://api.openai.com/v1` | gpt-4o, gpt-4o-mini |
| Azure OpenAI | `https://<resource>.openai.azure.com/` | gpt-4o |
| DeepSeek | `https://api.deepseek.com/v1` | deepseek-chat |
| æ™ºè°± AI | `https://open.bigmodel.cn/api/paas/v4/` | glm-4-flash |
| æœ¬åœ° Ollama | `http://localhost:11434/v1` | llama3, qwen2 |

**ç¤ºä¾‹**:
\```bash
# Azure OpenAI
export OPENAI_API_BASE="https://my-resource.openai.azure.com/"

# DeepSeek
export OPENAI_API_BASE="https://api.deepseek.com/v1"

# æ™ºè°± AI
export OPENAI_API_BASE="https://open.bigmodel.cn/api/paas/v4/"
\```

#### LLM_MODEL (å¯é€‰)
è‡ªå®šä¹‰æ¨¡å‹åç§°ã€‚

**é»˜è®¤å€¼**: `gpt-4o`

**æ¨èé…ç½®**:
- **ç”Ÿäº§ç¯å¢ƒ**: `gpt-4o` (æœ€ä½³è´¨é‡)
- **æµ‹è¯•ç¯å¢ƒ**: `gpt-4o-mini` (å¿«é€Ÿä¸”ä¾¿å®œ)
- **æˆæœ¬æ•æ„Ÿ**: `deepseek-chat` æˆ– `glm-4-flash`

**ç¤ºä¾‹**:
\```bash
export LLM_MODEL="gpt-4o-mini"
\```

### Kubernetes é…ç½®

#### KUBECONFIG (å¯é€‰)
Kubernetes é…ç½®æ–‡ä»¶è·¯å¾„ã€‚

**é»˜è®¤è¡Œä¸º**: ä½¿ç”¨ `~/.kube/config`

**å¤šé›†ç¾¤é…ç½®**:
\```bash
export KUBECONFIG="/path/to/kubeconfig"
\```

**åˆ‡æ¢é›†ç¾¤**:
\```bash
kubectl config use-context my-cluster
\```

### é«˜çº§é…ç½®

#### TEMPERATURE (å¯é€‰)
LLM æ¸©åº¦å‚æ•°ï¼Œæ§åˆ¶éšæœºæ€§ã€‚

- **èŒƒå›´**: 0.0 - 1.0
- **é»˜è®¤å€¼**: 0.0 (ç¡®å®šæ€§è¾“å‡º)
- **æ¨è**: ä¿æŒé»˜è®¤å€¼ä»¥è·å¾—ç¨³å®šç»“æœ

#### MAX_ROUNDS (å¯é€‰)
æœ€å¤§è¯Šæ–­è½®æ•°ã€‚

- **é»˜è®¤å€¼**: 10
- **å»ºè®®**: å¤§å¤šæ•°é—®é¢˜ 5-7 è½®è¶³å¤Ÿ

#### LOG_LEVEL (å¯é€‰)
æ—¥å¿—çº§åˆ«ã€‚

- **å¯é€‰å€¼**: DEBUG, INFO, WARNING, ERROR
- **é»˜è®¤å€¼**: INFO

## å®Œæ•´é…ç½®ç¤ºä¾‹

### åœºæ™¯ 1: OpenAI (é»˜è®¤)
\```bash
# .env
OPENAI_API_KEY=sk-proj-...
LLM_MODEL=gpt-4o
\```

### åœºæ™¯ 2: Azure OpenAI
\```bash
# .env
OPENAI_API_KEY=<Azure API Key>
OPENAI_API_BASE=https://my-resource.openai.azure.com/
LLM_MODEL=gpt-4o
\```

### åœºæ™¯ 3: DeepSeek (ç»æµå‹)
\```bash
# .env
OPENAI_API_KEY=<DeepSeek API Key>
OPENAI_API_BASE=https://api.deepseek.com/v1
LLM_MODEL=deepseek-chat
\```

### åœºæ™¯ 4: æ™ºè°± AI (å›½å†…æ¨è)
\```bash
# .env
OPENAI_API_KEY=<æ™ºè°± API Key>
OPENAI_API_BASE=https://open.bigmodel.cn/api/paas/v4/
LLM_MODEL=glm-4-flash
\```

### åœºæ™¯ 5: æœ¬åœ° Ollama (ç¦»çº¿/éšç§)
\```bash
# .env
OPENAI_API_BASE=http://localhost:11434/v1
LLM_MODEL=llama3:70b
\```

## æƒé™é…ç½®

### Kubernetes RBAC
å·¥å…·åªéœ€è¦ **åªè¯»æƒé™**ã€‚

**æœ€å°æƒé™æ¸…å•**:
\```yaml
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: kube-ovn-checker
rules:
- apiGroups: [""]
  resources: ["pods", "pods/log", "events", "nodes"]
  verbs: ["get", "list", "watch"]
- apiGroups: ["kubeovn.io"]
  resources: ["*", "ips", "subnets", "vpcs"]
  verbs: ["get", "list", "watch"]
- apiGroups: ["apps"]
  resources: ["deployments", "daemonsets", "statefulsets"]
  verbs: ["get", "list"]
\```

**åˆ›å»º ClusterRoleBinding**:
\```bash
kubectl create clusterrolebinding kube-ovn-checker \
  --clusterrole=kube-ovn-checker \
  --serviceaccount=default:default
\```

## éªŒè¯é…ç½®

### æ£€æŸ¥ç¯å¢ƒå˜é‡
\```bash
./kube-ovn-checker --check-config
\```

### æµ‹è¯• Kubernetes è¿æ¥
\```bash
kubectl get pods -A
\```

### æµ‹è¯• LLM è¿æ¥
\```bash
./kube-ovn-checker "test"
\```

## æ•…éšœæ’é™¤

### é—®é¢˜ 1: API Key æ— æ•ˆ
**ç—‡çŠ¶**: `AuthenticationError`
**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®å¤åˆ¶
2. ç¡®è®¤ API Key æœ‰æ•ˆæœŸ
3. éªŒè¯è´¦æˆ·ä½™é¢

### é—®é¢˜ 2: æ— æ³•è¿æ¥ Kubernetes
**ç—‡çŠ¶**: `Unable to connect to the server`
**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `~/.kube/config` æ–‡ä»¶
2. æµ‹è¯•: `kubectl cluster-info`
3. ç¡®è®¤ä¸Šä¸‹æ–‡æ­£ç¡®: `kubectl config current-context`

### é—®é¢˜ 3: ç½‘ç»œä»£ç†é—®é¢˜
**ç—‡çŠ¶**: è¿æ¥ LLM API è¶…æ—¶
**è§£å†³æ–¹æ¡ˆ**:
\```bash
export HTTP_PROXY=http://proxy.example.com:8080
export HTTPS_PROXY=http://proxy.example.com:8080
\```

## å®‰å…¨æœ€ä½³å®è·µ

1. **æ°¸è¿œä¸è¦**å°† `.env` æ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
2. **ä½¿ç”¨** ç¯å¢ƒå˜é‡æˆ–å¯†é’¥ç®¡ç†å·¥å…·ï¼ˆå¦‚ HashiCorp Vaultï¼‰
3. **å®šæœŸè½®æ¢** API Key
4. **é™åˆ¶** API Key çš„æƒé™å’Œé€Ÿç‡
5. **ä½¿ç”¨** ä¸“ç”¨æœåŠ¡è´¦æˆ·ï¼Œä¸è¦ä½¿ç”¨ä¸ªäººè´¦æˆ·
```

---

#### 4. troubleshooting.md (P0 - é˜»å¡é—®é¢˜è§£å†³)

**ç›®æ ‡**ï¼šTop 10 å¸¸è§é”™è¯¯çš„å¿«é€Ÿè§£å†³æ–¹æ¡ˆ

**å†…å®¹ç»“æ„**ï¼š
```markdown
# ğŸ”§ æ•…éšœæ’é™¤æŒ‡å—

## å¿«é€Ÿè¯Šæ–­æµç¨‹

\```mermaid
graph TD
    A[é‡åˆ°é”™è¯¯] --> B{é”™è¯¯ç±»å‹}
    B -->|å®‰è£…é—®é¢˜| C[æŸ¥çœ‹å®‰è£…é—®é¢˜]
    B -->|é…ç½®é—®é¢˜| D[æŸ¥çœ‹é…ç½®é—®é¢˜]
    B -->|è¿è¡Œæ—¶é”™è¯¯| E[æŸ¥çœ‹è¿è¡Œæ—¶é”™è¯¯]
    B -->|è¯Šæ–­ç»“æœé—®é¢˜| F[æŸ¥çœ‹ç»“æœé—®é¢˜]
    C --> G[æŒ‰ç…§æ­¥éª¤è§£å†³]
    D --> G
    E --> G
    F --> G
\```

## Top 10 å¸¸è§é—®é¢˜

### 1. API Key æ— æ•ˆ
**ç—‡çŠ¶**:
\```
Error: AuthenticationError: Incorrect API key provided
\```

**åŸå› **:
- API Key é”™è¯¯æˆ–è¿‡æœŸ
- è´¦æˆ·ä½™é¢ä¸è¶³
- API Key æƒé™ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
1. éªŒè¯ API Key: `echo $OPENAI_API_KEY`
2. é‡æ–°ç”Ÿæˆ API Key
3. æ£€æŸ¥è´¦æˆ·ä½™é¢
4. ç¡®è®¤ API Key æœ‰è®¿é—®æ¨¡å‹çš„æƒé™

**éªŒè¯å‘½ä»¤**:
\```bash
curl https://api.openai.com/v1/models \
  -H "Authorization: Bearer $OPENAI_API_KEY"
\```

---

### 2. Kubernetes è¿æ¥å¤±è´¥
**ç—‡çŠ¶**:
\```
Error: Unable to connect to the server: dial tcp: lookup xxx on xxx:53: server misbehaving
\```

**åŸå› **:
- kubeconfig æ–‡ä»¶é”™è¯¯
- é›†ç¾¤ä¸å¯è¾¾
- ç½‘ç»œé—®é¢˜
- TLS è¯ä¹¦è¿‡æœŸ

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ kubeconfig: `kubectl cluster-info`
2. éªŒè¯ä¸Šä¸‹æ–‡: `kubectl config current-context`
3. æµ‹è¯•è¿æ¥: `kubectl get nodes`
4. æ£€æŸ¥è¯ä¹¦: `kubectl config view --raw`

**è¯Šæ–­è„šæœ¬**:
\```bash
#!/bin/bash
echo "æ£€æŸ¥ Kubernetes è¿æ¥..."
kubectl cluster-info || echo "âŒ é›†ç¾¤ä¸å¯è¾¾"
kubectl get nodes || echo "âŒ æ— æ³•è®¿é—®èŠ‚ç‚¹"
kubectl config current-context || echo "âŒ æ— æœ‰æ•ˆä¸Šä¸‹æ–‡"
\```

---

### 3. æƒé™ä¸è¶³
**ç—‡çŠ¶**:
\```
Error: pods is forbidden: User "system:anonymous" cannot list pods
\```

**åŸå› **:
- RBAC æƒé™ä¸è¶³
- ServiceAccount ç¼ºå¤±
- æœªæ­£ç¡®è®¤è¯

**è§£å†³æ–¹æ¡ˆ**:
1. åˆ›å»ºæœ€å°æƒé™ ClusterRoleï¼ˆè§é…ç½®æ–‡æ¡£ï¼‰
2. ç»‘å®šåˆ°å½“å‰ç”¨æˆ·
3. éªŒè¯æƒé™: `kubectl auth can-i list pods --all-namespaces`

---

### 4. ä¾èµ–åŒ…å†²çª
**ç—‡çŠ¶**:
\```
ERROR: pip's dependency resolver does not currently take into account...
\```

**åŸå› **:
- Python ç‰ˆæœ¬ä¸å…¼å®¹
- å·²å®‰è£…çš„åŒ…ç‰ˆæœ¬å†²çª
- è™šæ‹Ÿç¯å¢ƒæœªæ¿€æ´»

**è§£å†³æ–¹æ¡ˆ**:
\```bash
# ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/macOS
# æˆ–
venv\Scripts\activate  # Windows

# å‡çº§ pip
pip install --upgrade pip

# é‡æ–°å®‰è£…
pip install -e .
\```

---

### 5. è¯Šæ–­è¶…æ—¶
**ç—‡çŠ¶**:
\```
Error: Timeout after 300 seconds
\```

**åŸå› **:
- é›†ç¾¤è§„æ¨¡å¤§ï¼Œæ”¶é›†æ•°æ®æ…¢
- ç½‘ç»œå»¶è¿Ÿ
- LLM API å“åº”æ…¢

**è§£å†³æ–¹æ¡ˆ**:
1. å¢åŠ è¶…æ—¶æ—¶é—´ï¼ˆç¯å¢ƒå˜é‡ `TIMEOUT=600`ï¼‰
2. ä½¿ç”¨æ›´å¿«çš„ LLM æ¨¡å‹ï¼ˆgpt-4o-miniï¼‰
3. å‡å°‘å¹¶å‘æ”¶é›†æ•°é‡

---

### 6. è¯Šæ–­ç»“æœä¸º Fallback
**ç—‡çŠ¶**:
\```
è¯Šæ–­çŠ¶æ€: fallback
```

**å«ä¹‰**:
- LLM æœªèƒ½ç»™å‡ºæ˜ç¡®ç»“è®º
- ä½¿ç”¨è§„åˆ™ç³»ç»Ÿçš„å…œåº•ç»“æœ
- å¯ä¿¡åº¦ä½äºæ­£å¸¸è¯Šæ–­

**å¤„ç†**:
1. æŸ¥çœ‹æ”¶é›†çš„è¯æ®
2. é‡æ–°æè¿°é—®é¢˜å¹¶è¿è¡Œ
3. äººå·¥å®¡æ ¸åæ‰§è¡Œå»ºè®®

---

### 7. è¾“å‡ºä¸­æ–‡ä¹±ç 
**ç—‡çŠ¶**:
ç»ˆç«¯æ˜¾ç¤ºä¹±ç æˆ–æ–¹å—å­—ç¬¦

**åŸå› **:
- ç»ˆç«¯ä¸æ”¯æŒ UTF-8
- å­—ä½“ç¼ºå¤±

**è§£å†³æ–¹æ¡ˆ**:
\```bash
# Linux/macOS
export LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8

# Windows PowerShell
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
chcp 65001
\```

---

### 8. å†…å­˜ä¸è¶³
**ç—‡çŠ¶**:
\```
MemoryError: Killed
```

**åŸå› **:
- é›†ç¾¤æ•°æ®é‡å¤§
- å¹¶å‘å·¥å…·è°ƒç”¨å¤š

**è§£å†³æ–¹æ¡ˆ**:
1. å‡å°‘å¹¶å‘å·¥å…·è°ƒç”¨
2. å¢åŠ ç³»ç»Ÿå†…å­˜
3. ä½¿ç”¨ç¼“å­˜æœºåˆ¶

---

### 9. å·¥å…·è°ƒç”¨å¤±è´¥
**ç—‡çŠ¶**:
\```
Error: Tool collect_pod_logs failed
```

**åŸå› **:
- Pod ä¸å­˜åœ¨
- æƒé™ä¸è¶³
- kubectl-ko å·¥å…·ç¼ºå¤±

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ Pod åç§°å’Œå‘½åç©ºé—´
2. éªŒè¯ kubectl-ko æ˜¯å¦å®‰è£…
3. æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—: `LOG_LEVEL=DEBUG ./kube-ovn-checker "..."`

---

### 10. è¾¾åˆ°æœ€å¤§è½®æ•°
**ç—‡çŠ¶**:
\```
Warning: Reached max_rounds=10 without convergence
```

**å«ä¹‰**:
- Agent æœªèƒ½åœ¨ 10 è½®å†…æ”¶æ•›åˆ°ç»“è®º
- é—®é¢˜å¯èƒ½è¿‡äºå¤æ‚

**å¤„ç†**:
1. å¢åŠ æœ€å¤§è½®æ•°: `MAX_ROUNDS=15`
2. é‡æ–°æè¿°é—®é¢˜ï¼Œæä¾›æ›´å¤šä¸Šä¸‹æ–‡
3. æŸ¥çœ‹å·²æ”¶é›†çš„è¯æ®ï¼Œäººå·¥åˆ†æ

## æ”¶é›†è¯Šæ–­ä¿¡æ¯

### å¯ç”¨è°ƒè¯•æ—¥å¿—
\```bash
LOG_LEVEL=DEBUG ./kube-ovn-checker "é—®é¢˜æè¿°" > debug.log 2>&1
\```

### ç”Ÿæˆè¯Šæ–­æŠ¥å‘Š
å·¥å…·ä¼šè‡ªåŠ¨ä¿å­˜æŠ¥å‘Šåˆ°:
\``
diagnosis_report_YYYYMMDD_HHMMSS.json
\```

### æäº¤ Bug Report

**å¿…è¦ä¿¡æ¯**:
1. é”™è¯¯ä¿¡æ¯å®Œæ•´è¾“å‡º
2. è°ƒè¯•æ—¥å¿— (`debug.log`)
3. é…ç½®ä¿¡æ¯ï¼ˆéšè—æ•æ„Ÿä¿¡æ¯ï¼‰
4. Kubernetes ç‰ˆæœ¬: `kubectl version`
5. Python ç‰ˆæœ¬: `python --version`
6. å¤ç°æ­¥éª¤

**GitHub Issues**: https://github.com/xxx/kube-ovn-langgraph-checker/issues

## è·å–å¸®åŠ©

- ğŸ“– æŸ¥çœ‹å®Œæ•´æ–‡æ¡£
- ğŸ’¬ åŠ å…¥ç¤¾åŒºè®¨è®º
- ğŸ› æäº¤ Bug Report
- âœ¨ æäº¤åŠŸèƒ½è¯·æ±‚
```

---

#### 5. examples/ ç›®å½• (P1 - æå‡ä½“éªŒ)

**ç›®æ ‡**ï¼šçœŸå®æ¡ˆä¾‹åº“ï¼Œå¸®åŠ©ç”¨æˆ·å»ºç«‹é¢„æœŸ

**æ¯ä¸ªæ¡ˆä¾‹çš„ç»“æ„**ï¼š
```markdown
# æ¡ˆä¾‹: Pod Pending é—®é¢˜

## é—®é¢˜æè¿°
ç”¨æˆ·æŠ¥å‘Šï¼šåº”ç”¨ Pod ä¸€ç›´å¤„äº Pending çŠ¶æ€ï¼Œæ— æ³•å¯åŠ¨ã€‚

## è¿è¡Œè¯Šæ–­
\```bash
./kube-ovn-checker "æˆ‘çš„åº”ç”¨ Pod ä¸€ç›´ Pendingï¼Œåç§°æ˜¯ nginx-deploy-xxxï¼Œåœ¨ default å‘½åç©ºé—´"
\```

## è¯Šæ–­è¿‡ç¨‹ï¼ˆæ€ç»´é“¾ï¼‰

### ç¬¬ 1 è½®: T0 å¿«é€Ÿæ£€æŸ¥
**Agent æ€è€ƒ**: é¦–å…ˆæ‰§è¡Œ T0 æ£€æŸ¥ï¼Œäº†è§£æ•´ä½“å¥åº·çŠ¶æ€

**å·¥å…·è°ƒç”¨**: `collect_t0_check()`

**å‘ç°**:
- kube-ovn-controller: å¥åº·
- Subnet status: default-subnet IP ä½¿ç”¨ç‡ 95% âš ï¸
- Pending Pods: 15 ä¸ª

### ç¬¬ 2 è½®: åˆ†æ Pod çŠ¶æ€
**Agent æ€è€ƒ**: éœ€è¦æŸ¥çœ‹ Pod çš„è¯¦ç»†äº‹ä»¶å’ŒçŠ¶æ€

**å·¥å…·è°ƒç”¨**:
- `collect_pod_events(pod_name="nginx-deploy-xxx", namespace="default")`
- `collect_pod_describe(pod_name="nginx-deploy-xxx", namespace="default")`

**å‘ç°**:
- äº‹ä»¶: `FailedScheduling: 0/3 nodes are available: 1 Insufficient ips, 2 node.kubernetes.io/not-ready`
- åŸå› : Subnet IP å·²è€—å°½

### ç¬¬ 3 è½®: éªŒè¯ Subnet çŠ¶æ€
**Agent æ€è€ƒ**: éœ€è¦ç¡®è®¤ Subnet çš„ IP åˆ†é…æƒ…å†µ

**å·¥å…·è°ƒç”¨**: `collect_subnet_status(subnet_name="default-subnet")`

**å‘ç°**:
- CIDR: 10.16.0.0/16
- æ€» IP æ•°: 65536
- å·²ç”¨ IP: 62259 (95%)
- å¯ç”¨ IP: 3277

## è¯Šæ–­ç»“è®º

### ğŸ¯ æ ¹æœ¬åŸå› 
Subnet `default-subnet` IP åœ°å€è€—å°½ï¼ˆä½¿ç”¨ç‡ 95%ï¼‰ï¼Œå¯¼è‡´æ–° Pod æ— æ³•åˆ†é… IPã€‚

### ğŸ“Š ä¸¥é‡åº¦
**é«˜** - å½±å“æ–°åº”ç”¨éƒ¨ç½²å’Œç°æœ‰åº”ç”¨æ‰©å®¹

### ğŸ’¡ è§£å†³æ–¹æ¡ˆ

#### æ–¹æ¡ˆ 1: æ‰©å®¹ Subnetï¼ˆæ¨èï¼‰
\```bash
# ä¿®æ”¹ Subnet CIDR
kubectl edit subnet default-subnet

# å°† CIDR ä» 10.16.0.0/16 æ‰©å¤§åˆ° 10.16.0.0/12
spec:
  cidrBlock: 10.16.0.0/12
\```

**ä¼˜ç‚¹**: å½»åº•è§£å†³ï¼Œæœªæ¥ä¸æ˜“å†æ¬¡å‡ºç°
**ç¼ºç‚¹**: éœ€è¦é‡å¯ç°æœ‰ Pod
**æ—¶é—´**: 30 åˆ†é’Ÿ

#### æ–¹æ¡ˆ 2: æ¸…ç†åƒµå°¸ IP
\```bash
# æŸ¥æ‰¾å·²åˆ é™¤ Pod çš„æ®‹ç•™ IP
kubectl-kubeovn ips --all-namespaces | grep Terminated

# åˆ é™¤åƒµå°¸ IP
kubectl-kubeovn ip delete <ip-address>
\```

**ä¼˜ç‚¹**: å¿«é€Ÿï¼Œä¸å½±å“ç°æœ‰ Pod
**ç¼ºç‚¹**: ä¸´æ—¶è§£å†³ï¼Œå¯èƒ½å†æ¬¡å‡ºç°
**æ—¶é—´**: 10 åˆ†é’Ÿ

#### æ–¹æ¡ˆ 3: åˆ›å»ºæ–° Subnet
\```bash
kubectl apply -f - <<EOF
apiVersion: kubeovn.io/v1
kind: Subnet
metadata:
  name: new-subnet
spec:
  cidrBlock: 10.20.0.0/16
  default: false
EOF
\```

**ä¼˜ç‚¹**: éš”ç¦»æ–°åº”ç”¨
**ç¼ºç‚¹**: éœ€è¦é…ç½® NetworkPolicy
**æ—¶é—´**: 20 åˆ†é’Ÿ

### âœ… éªŒè¯æ­¥éª¤
1. æ£€æŸ¥ Subnet å¯ç”¨ IP: `kubectl-kubeovn subnet get default-subnet`
2. åˆ é™¤ Pending Pod: `kubectl delete pod nginx-deploy-xxx`
3. è§‚å¯Ÿæ–° Pod: `kubectl get pod -w`

### ğŸ“š ç›¸å…³çŸ¥è¯†
- [IP ç®¡ç†åŸç†](../knowledge/principles/ip-management.md)
- [Subnet é…ç½®æ–‡æ¡£](https://kubeovn.github.io/docs/stable/en/guides/ipam)

## é¢„é˜²æªæ–½

1. **ç›‘æ§ Subnet ä½¿ç”¨ç‡**
   \```bash
   # è®¾ç½®å‘Šè­¦: ä½¿ç”¨ç‡ > 80%
   kubectl-kubeovn subnet get --all-namespaces -o json | \
     jq '.items[] | select(.status.availableIPs / .status.totalIPs < 0.2)'
   \```

2. **å®šæœŸæ¸…ç†åƒµå°¸ IP**
   \```bash
   # æ¯å‘¨è¿è¡Œä¸€æ¬¡
   kubectl-kubeovn gc ips
   \```

3. **è§„åˆ’åˆç†çš„ CIDR å¤§å°**
   - å°é›†ç¾¤ (< 100 èŠ‚ç‚¹): /18
   - ä¸­å‹é›†ç¾¤ (100-500 èŠ‚ç‚¹): /16
   - å¤§å‹é›†ç¾¤ (> 500 èŠ‚ç‚¹): /14

## å®Œæ•´è¯Šæ–­è¾“å‡º

<details>
<summary>ç‚¹å‡»å±•å¼€å®Œæ•´è¾“å‡ºï¼ˆèŠ‚çœç©ºé—´ï¼‰</summary>

\```json
{
  "query": "æˆ‘çš„åº”ç”¨ Pod ä¸€ç›´ Pending",
  "diagnosis_status": "completed",
  "rounds": 3,
  "issue": "Pod Pending æ— æ³•å¯åŠ¨",
  "root_cause": {
    "category": "IP è€—å°½",
    "specific_cause": "Subnet default-subnet IP ä½¿ç”¨ç‡ 95%ï¼Œæ— å¯ç”¨ IP",
    "confidence": "high"
  },
  "severity": "high",
  "solutions": [
    {
      "priority": 1,
      "description": "æ‰©å®¹ Subnet CIDR",
      "steps": [...]
    }
  ],
  "evidence": {
    "t0_check": {...},
    "pod_events": [...],
    "subnet_status": {...}
  },
  "metadata": {
    "timestamp": "2026-01-11T10:30:00Z",
    "model": "gpt-4o",
    "duration_seconds": 45
  }
}
\```

</details>

## æ€»ç»“

è¿™ä¸ªæ¡ˆä¾‹å±•ç¤ºäº†ï¼š
- âœ… T0 å¿«é€Ÿæ£€æŸ¥å‘ç°äº† Subnet ä½¿ç”¨ç‡å¼‚å¸¸
- âœ… Agent è‡ªä¸»é€‰æ‹©äº†æ­£ç¡®çš„å·¥å…·é“¾
- âœ… 3 è½®è¯Šæ–­æ”¶æ•›åˆ°æ ¹å› 
- âœ… æä¾›äº†å¤šä¸ªå¯é€‰æ–¹æ¡ˆ
- âœ… åŒ…å«éªŒè¯æ­¥éª¤å’Œé¢„é˜²æªæ–½

**å…³é”®æˆåŠŸå› ç´ **:
- é—®é¢˜æè¿°åŒ…å« Pod åç§°å’Œå‘½åç©ºé—´
- Subnet ä½¿ç”¨ç‡å‘Šè­¦æœºåˆ¶
- æä¾›å¤šä¸ªå¯é€‰è§£å†³æ–¹æ¡ˆ
```

---

### ç”¨æˆ·æ–‡æ¡£çš„ç‰¹æ®Šè€ƒè™‘

#### ä¸­æ–‡æœ¬åœ°åŒ–æœ€ä½³å®è·µ

1. **æœ¯è¯­ä¸€è‡´æ€§**
   - ç»Ÿä¸€ä½¿ç”¨ "è¯Šæ–­" è€Œé "æ’æŸ¥"
   - ç»Ÿä¸€ä½¿ç”¨ "é›†ç¾¤" è€Œé "ç¾¤é›†"
   - ç»Ÿä¸€ä½¿ç”¨ "å‘½åç©ºé—´" è€Œé "åå­—ç©ºé—´"

2. **è¯­è¨€é£æ ¼**
   - ç›´æ¥ï¼š`è¿è¡Œæ­¤å‘½ä»¤` (è€Œä¸æ˜¯ `ä½ åº”è¯¥è¿è¡Œæ­¤å‘½ä»¤`)
   - æ¸…æ™°ï¼š`è¿™ä¼šå¯¼è‡´` (è€Œä¸æ˜¯ `è¿™å¯èƒ½ä¼šé€ æˆ`)
   - ç¤¼è²Œä½†ç®€æ´

3. **æ ¼å¼è§„èŒƒ**
   - ä½¿ç”¨ä¸­æ–‡å…¨è§’æ ‡ç‚¹ï¼š`ï¼Œã€‚ï¼›ï¼š`
   - ä»£ç å’Œå‘½ä»¤ä½¿ç”¨è‹±æ–‡
   - ç¯å¢ƒå˜é‡ä½¿ç”¨å¤§å†™

---

## ğŸ—ï¸ æ–‡æ¡£äºŒï¼šç³»ç»Ÿæ¶æ„æ–‡æ¡£ (Architecture)

### ç›®æ ‡
å¸®åŠ©æŠ€æœ¯å†³ç­–è€…ã€å¼€å‘è€…å’Œé«˜çº§ç”¨æˆ·ç†è§£ç³»ç»Ÿè®¾è®¡åŸç†ã€æŠ€æœ¯é€‰å‹å’Œè¯Šæ–­æµç¨‹ã€‚

### é‡‡ç”¨æ¡†æ¶
**arc42 æ¶æ„æ ‡å‡†** + **C4 æ¨¡å‹**

### æ–‡æ¡£ç»“æ„

```
docs/architecture/
â”œâ”€â”€ README.md                      # å¯¼èˆªæ–‡æ¡£
â”œâ”€â”€ overview.md                    # ç³»ç»Ÿæ¦‚è¿° â­ P0
â”œâ”€â”€ system-context.md              # ç³»ç»Ÿä¸Šä¸‹æ–‡ â­ P0
â”œâ”€â”€ constraints.md                 # çº¦æŸæ¡ä»¶ â­ P1
â”œâ”€â”€ building-blocks.md             # æ„å»ºå—è§†å›¾ â­ P0
â”œâ”€â”€ runtime-view.md                # è¿è¡Œæ—¶è§†å›¾ â­ P0
â”œâ”€â”€ deployment-view.md             # éƒ¨ç½²è§†å›¾ â­ P1
â”œâ”€â”€ quality-goals.md               # è´¨é‡ç›®æ ‡ â­ P1
â”œâ”€â”€ architecture-decisions.md      # æ¶æ„å†³ç­–è®°å½• â­ P1
â””â”€â”€ diagrams/                      # æ¶æ„å›¾
    â”œâ”€â”€ c4-system-context.mermaid  # C4 ç³»ç»Ÿä¸Šä¸‹æ–‡å›¾
    â”œâ”€â”€ c4-containers.mermaid      # C4 å®¹å™¨å›¾
    â”œâ”€â”€ c4-components.mermaid      # C4 ç»„ä»¶å›¾
    â”œâ”€â”€ data-flow.mermaid          # æ•°æ®æµå›¾
    â”œâ”€â”€ state-machine.mermaid      # çŠ¶æ€æœºå›¾
    â””â”€â”€ sequence-diagnosis.mermaid # è¯Šæ–­æ—¶åºå›¾
```

### æ ¸å¿ƒå†…å®¹è¦ç‚¹

#### 1. overview.md (P0 - ç†è§£ç³»ç»Ÿ)

**å†…å®¹ç»“æ„**ï¼š
```markdown
# ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ¦‚è¿°

## ç³»ç»Ÿå®šä½

**Kube-OVN-LangGraph-Checker** æ˜¯ä¸€ä¸ªåŸºäº LLM Agent çš„æ™ºèƒ½ Kube-OVN ç½‘ç»œè¯Šæ–­å·¥å…·ï¼Œé€šè¿‡è‡ªä¸»å†³ç­–å’Œæ¸è¿›å¼æ¨ç†ï¼Œå°†è¿ç»´äººå‘˜ä»ç¹ççš„æ‰‹åŠ¨æ’æŸ¥ä¸­è§£æ”¾å‡ºæ¥ã€‚

### æ ¸å¿ƒä»·å€¼

| ä¼ ç»Ÿæ–¹æ³• | Kube-OVN Checker |
|---------|-----------------|
| æ‰‹åŠ¨æ‰§è¡Œ 20+ å‘½ä»¤ | AI è‡ªä¸»é€‰æ‹©å·¥å…· |
| éœ€è¦ä¸“å®¶ç»éªŒ | æ™ºèƒ½è¯Šæ–­ï¼Œé™ä½é—¨æ§› |
| è€—æ—¶ 30-60 åˆ†é’Ÿ | 5-10 åˆ†é’Ÿå®Œæˆ |
| æ˜“é—æ¼ç»†èŠ‚ | ç³»ç»ŸåŒ–æ£€æŸ¥ |
| ä¾èµ–ä¸ªäººè®°å¿† | çŸ¥è¯†åº“é©±åŠ¨ |

## æŠ€æœ¯æ ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ç”¨æˆ·å±‚ (CLI)                       â”‚
â”‚          Python 3.9+ / Rich ç»ˆç«¯               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Agent æ™ºèƒ½å±‚ (LangGraph)                â”‚
â”‚    LangChain 0.3.0+ / LangGraph 1.0.3+         â”‚
â”‚     ReAct æ¨¡å¼ / å·¥å…·è°ƒç”¨ / å¤šè½®æ¨ç†            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         å·¥å…·å±‚ (26 ä¸ªè¯Šæ–­å·¥å…·)                   â”‚
â”‚      kubectl / kubectl-ko / OVN/OVS å‘½ä»¤        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         æ•°æ®æ”¶é›†å±‚ (K8s API)                    â”‚
â”‚      Kubernetes Python Client                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      LLM æ¨ç†å±‚ (OpenAI / å…¼å®¹æœåŠ¡)             â”‚
â”‚   GPT-4o / DeepSeek / æ™ºè°± AI / Ollama         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒè®¾è®¡åŸåˆ™

### 1. Agent è‡ªä¸»å†³ç­–
> "LLM è‡ªä¸»å†³å®šä½¿ç”¨å“ªäº›å·¥å…·ï¼Œè€Œä¸æ˜¯ç¡¬ç¼–ç å†³ç­–æ ‘"

**ä¼˜åŠ¿**:
- çµæ´»åº”å¯¹æœªçŸ¥é—®é¢˜
- ç»„åˆå¤šä¸ªå·¥å…·çš„èƒ½åŠ›
- æ¸è¿›å¼æ¨ç†æ”¶æ•›åˆ°æ ¹å› 

**å®ç°**:
- LangGraph ç¼–æ’ Agent çŠ¶æ€æœº
- ReAct æ¨¡å¼ï¼ˆæ¨ç† + è¡ŒåŠ¨ï¼‰
- åŠ¨æ€å·¥å…·é€‰æ‹©

### 2. åˆ†å±‚è¯Šæ–­ç­–ç•¥
> "ä»å¿«é€Ÿæ£€æŸ¥åˆ°æ·±åº¦åˆ†æï¼Œæ¸è¿›å¼æ”¶æ•›"

```
T0 (10ç§’)     T1 (30ç§’)     T2 (æ·±åº¦)
   â†“             â†“              â†“
å¿«é€Ÿæ£€æŸ¥   â†’  è¯¦ç»†è¯Šæ–­   â†’  æ ¹å› åˆ†æ
å¥åº·æ‰«æ   â†’  è¯æ®æ”¶é›†   â†’  æ·±åº¦æ¨ç†
ç­›é€‰é—®é¢˜   â†’  éªŒè¯å‡è®¾   â†’  æ”¶æ•›ç»“è®º
```

**ä¼˜åŠ¿**:
- å¿«é€Ÿåé¦ˆ
- æŒ‰éœ€æ·±å…¥
- é¿å…"å¤§æµ·æé’ˆ"

### 3. è¯æ®é©±åŠ¨åˆ†æ
> "ä¸çŒœæµ‹ä¸å‡è®¾ï¼Œæ¯ä¸ªç»“è®ºéƒ½æœ‰æ•°æ®æ”¯æ’‘"

**æµç¨‹**:
1. T0 å‘ç°å¼‚å¸¸ï¼ˆå¦‚ Pod é‡å¯ï¼‰
2. å½¢æˆå‡è®¾ï¼ˆå¦‚ OVS é…ç½®é”™è¯¯ï¼‰
3. æ”¶é›†è¯æ®éªŒè¯ï¼ˆovn-traceï¼‰
4. æ›´æ–°æˆ–æ¨ç¿»å‡è®¾
5. æ”¶æ•›åˆ°æ ¹å› 

### 4. çŸ¥è¯†åº“å¢å¼º
> "å°† Kube-OVN ä¸“å®¶çŸ¥è¯†æ³¨å…¥ LLM"

**çŸ¥è¯†åº“å†…å®¹**:
- æ§åˆ¶å¹³é¢åŸç† (2 ä¸ªæ–‡æ¡£)
- æ•°æ®å¹³é¢åŸç† (10 ä¸ªæ–‡æ¡£)
- è¯Šæ–­å·¥ä½œæµ (3 ä¸ªæ–‡æ¡£)

**å¢å¼ºæ–¹å¼**:
- è§¦å‘è¯åŒ¹é…
- å…ƒæ•°æ®æ£€ç´¢
- T0 è½»é‡çº§æ³¨å…¥

## å…³é”®ç»„ä»¶

### 1. LLM Agent Analyzer
- **èŒè´£**: è¯Šæ–­åè°ƒå’Œå†³ç­–
- **æŠ€æœ¯**: LangGraph çŠ¶æ€æœº
- **è¾“å…¥**: ç”¨æˆ·æŸ¥è¯¢
- **è¾“å‡º**: è¯Šæ–­ç»“è®ºå’Œè§£å†³æ–¹æ¡ˆ

### 2. LangChain Tools (26 ä¸ª)
- **èŒè´£**: æ•°æ®æ”¶é›†å°è£…
- **æŠ€æœ¯**: LangChain Structured Tools
- **åˆ†ç±»**: Pod, Subnet, Node, Controller, OVN/OVS

### 3. K8s Resource Collector
- **èŒè´£**: Kubernetes æ•°æ®æ”¶é›†
- **æŠ€æœ¯**: kubectl + kubectl-ko
- **ç‰¹ç‚¹**: å¼‚æ­¥å¹¶å‘ã€ç¼“å­˜æœºåˆ¶

### 4. Knowledge Retriever
- **èŒè´£**: çŸ¥è¯†åº“æ£€ç´¢å’Œæ³¨å…¥
- **æŠ€æœ¯**: å…ƒæ•°æ®åŒ¹é…ã€LLM æ™ºèƒ½æ£€ç´¢
- **å†…å®¹**: åŸç†æ–‡æ¡£ã€å·¥ä½œæµæ–‡æ¡£

### 5. Intelligent Classifier
- **èŒè´£**: é—®é¢˜åœºæ™¯åˆ†ç±»
- **æŠ€æœ¯**: LLM åˆ†ç±»å™¨
- **åœºæ™¯**: 5 å¤§ç±»åˆ«ï¼ˆPod é€šä¿¡ã€Service è®¿é—®ç­‰ï¼‰

## è¯Šæ–­æµç¨‹æ¦‚è§ˆ

```mermaid
graph TB
    A[ç”¨æˆ·æŸ¥è¯¢] --> B[æ™ºèƒ½åˆ†ç±»]
    B --> C{T0 å¿«é€Ÿæ£€æŸ¥}
    C --> D[Agent åˆ†æ]
    D --> E{éœ€è¦æ›´å¤šä¿¡æ¯?}
    E -->|æ˜¯| F[é€‰æ‹©å·¥å…·]
    F --> G[æ”¶é›†è¯æ®]
    G --> D
    E -->|å¦| H[ç”Ÿæˆç»“è®º]
    H --> I[è¾“å‡ºç»“æœ]
```

## è´¨é‡å±æ€§

| å±æ€§ | ç›®æ ‡ | å®ç°ç­–ç•¥ |
|-----|------|---------|
| **è¯Šæ–­é€Ÿåº¦** | < 2 åˆ†é’Ÿ | T0 å¿«é€Ÿæ£€æŸ¥ã€å¹¶å‘æ”¶é›† |
| **å‡†ç¡®ç‡** | > 85% | çŸ¥è¯†åº“å¢å¼ºã€å¤šè½®æ¨ç† |
| **å¯ç”¨æ€§** | 99.9% | é™çº§æœºåˆ¶ã€è§„åˆ™å…œåº• |
| **å¯æ‰©å±•æ€§** | 1000+ èŠ‚ç‚¹ | ç¼“å­˜æœºåˆ¶ã€åˆ†é¡µæ”¶é›† |
| **å®‰å…¨æ€§** | åªè¯»æ“ä½œ | RBAC æƒé™é™åˆ¶ |

## æ¶æ„äº®ç‚¹

### 1. ReAct Agent æ¨¡å¼
ä¼ ç»Ÿçš„è¯Šæ–­å·¥å…·ä½¿ç”¨ç¡¬ç¼–ç çš„å†³ç­–æ ‘ï¼Œè€Œæœ¬ç³»ç»Ÿä½¿ç”¨ LLM Agent è‡ªä¸»å†³ç­–ï¼š

**ä¼ ç»Ÿæ–¹æ³•**:
```
if Pod restart:
    if OVS error:
        check_ovs_log()
    else:
        check_kubelet_log()
else:
    check_network()
```

**ReAct Agent**:
```
Thought: Pod ä¸€ç›´åœ¨é‡å¯ï¼Œéœ€è¦æŸ¥çœ‹æ—¥å¿—
Action: collect_pod_logs("my-pod")
Observation: æ—¥å¿—æ˜¾ç¤º "Failed to create OVS port"
Thought: OVS ç«¯å£åˆ›å»ºå¤±è´¥ï¼Œéœ€è¦æ£€æŸ¥ OVS çŠ¶æ€
Action: collect_ovs_vsctl()
...
```

**ä¼˜åŠ¿**:
- âœ… çµæ´»åº”å¯¹æœªçŸ¥é—®é¢˜
- âœ… ç»„åˆå¤šä¸ªå·¥å…·
- âœ… è§£é‡Šæ¨ç†è¿‡ç¨‹

### 2. æ¸è¿›å¼è¯Šæ–­
```
Round 1 (T0): å¿«é€Ÿæ‰«æ â†’ å‘ç° Controller Pod é‡å¯
Round 2: æ·±å…¥åˆ†æ â†’ æŸ¥çœ‹ Controller æ—¥å¿—
Round 3: éªŒè¯å‡è®¾ â†’ OVN NB è¿æ¥å¤±è´¥
Round 4: ç¡®è®¤æ ¹å›  â†’ ovn-nb æœåŠ¡ä¸å¯è¾¾
```

### 3. å·¥å…·ä¼˜å…ˆçº§ç³»ç»Ÿ
Agent è¢«è®­ç»ƒä¼˜å…ˆä½¿ç”¨é«˜æ•ˆå·¥å…·ï¼š

| ä¼˜å…ˆçº§ | å·¥å…·ç±»å‹ | ç¤ºä¾‹ | åŸå›  |
|-------|---------|------|------|
| **P0 é¦–é€‰** | é€»è¾‘è·¯å¾„åˆ†æ | `ovn-trace` | å‡†ç¡®ã€å¿«é€Ÿ |
| **P1** | é…ç½®æ£€æŸ¥ | `ovn-nbctl` | æ— ä¾µå…¥ |
| **P2** | æ—¥å¿—åˆ†æ | `collect_logs` | è¯¦ç»†ä½†æ…¢ |
| **P3** | æµé‡æŠ“åŒ… | `tcpdump` | æœ€åæ‰‹æ®µ |

## ä¸å…¶ä»–å·¥å…·å¯¹æ¯”

| å·¥å…· | ç±»å‹ | ä¼˜åŠ¿ | å±€é™ |
|-----|------|------|------|
| **Kube-OVN Checker** | LLM Agent | æ™ºèƒ½å†³ç­–ã€è‡ªé€‚åº” | ä¾èµ– LLM |
| **kubectl-kubeovn** | CLI | ç²¾ç¡®æ§åˆ¶ | éœ€è¦ä¸“å®¶ç»éªŒ |
| **Kubernetes Event** | ç›‘æ§ | è¢«åŠ¨æ”¶é›† | ä¸æä¾›æ ¹å›  |
| **Prometheus** | æŒ‡æ ‡ | è¶‹åŠ¿åˆ†æ | æ— ä¸Šä¸‹æ–‡ |

## æ€»ç»“

Kube-OVN-LangGraph-Checker é€šè¿‡ä»¥ä¸‹åˆ›æ–°å®ç°äº†æ™ºèƒ½è¯Šæ–­ï¼š

1. **LLM Agent è‡ªä¸»å†³ç­–** - çµæ´»åº”å¯¹æœªçŸ¥é—®é¢˜
2. **åˆ†å±‚è¯Šæ–­ç­–ç•¥** - å¿«é€Ÿåé¦ˆã€æŒ‰éœ€æ·±å…¥
3. **è¯æ®é©±åŠ¨åˆ†æ** - ä¸çŒœæµ‹ä¸å‡è®¾
4. **çŸ¥è¯†åº“å¢å¼º** - æ³¨å…¥ä¸“å®¶çŸ¥è¯†

è¿™äº›è®¾è®¡ä½¿å¾—å·¥å…·èƒ½å¤Ÿåœ¨ 5-10 åˆ†é’Ÿå†…å®Œæˆä¼ ç»Ÿæ–¹æ³• 30-60 åˆ†é’Ÿçš„è¯Šæ–­å·¥ä½œï¼ŒåŒæ—¶é™ä½äº†è¿ç»´é—¨æ§›ã€‚
```

---

#### 2. building-blocks.md (P0 - ç†è§£ç»„ä»¶)

**å†…å®¹ç»“æ„**ï¼š
```markdown
# ğŸ§± æ„å»ºå—è§†å›¾

## ç³»ç»Ÿåˆ†å±‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLI å±‚                                â”‚
â”‚  - å‚æ•°è§£æ                                        â”‚
â”‚  - è¿›åº¦æ˜¾ç¤º                                        â”‚
â”‚  - ç»“æœæ ¼å¼åŒ–                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ†ç±»å±‚                                â”‚
â”‚  - é—®é¢˜åœºæ™¯åˆ†ç±» (5 å¤§ç±»)                            â”‚
â”‚  - çŸ¥è¯†åº“æ£€ç´¢                                      â”‚
â”‚  - åœºæ™¯è·¯ç”±                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Agent å±‚                          â”‚
â”‚  - LangGraph çŠ¶æ€æœº                                â”‚
â”‚  - ReAct æ¨ç†å¾ªç¯                                  â”‚
â”‚  - å¤šè½®å†³ç­–                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å·¥å…·å±‚                             â”‚
â”‚  - 26 ä¸ª LangChain Tools                           â”‚
â”‚  - Pydantic å‚æ•°éªŒè¯                               â”‚
â”‚  - ç»Ÿä¸€è¿”å›æ ¼å¼                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ”¶é›†å±‚                    â”‚
â”‚  - K8s Resource Collector                         â”‚
â”‚  - kubectl / kubectl-ko å°è£…                       â”‚
â”‚  - å¼‚æ­¥å¹¶å‘æ‰§è¡Œ                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®å±‚                     â”‚
â”‚  - Kubernetes API                                 â”‚
â”‚  - OVN/OVS DB                                      â”‚
â”‚  - Pod æ—¥å¿—å’Œäº‹ä»¶                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 1. CLI å±‚

**æ–‡ä»¶**: `kube_ovn_checker/cli/main.py`

**èŒè´£**:
- è§£æå‘½ä»¤è¡Œå‚æ•°
- è·å–ç”¨æˆ·æŸ¥è¯¢
- åˆå§‹åŒ– Analyzer
- å±•ç¤ºè¯Šæ–­è¿›åº¦
- æ ¼å¼åŒ–è¾“å‡ºç»“æœ

**å…³é”®ä»£ç **:
```python
async def main():
    # 1. è·å–æŸ¥è¯¢
    query = get_user_query()

    # 2. åˆå§‹åŒ– Analyzer
    analyzer = LLMAgentAnalyzer(
        model=os.getenv("LLM_MODEL", "gpt-4o"),
        api_key=os.getenv("OPENAI_API_KEY")
    )

    # 3. æ‰§è¡Œè¯Šæ–­
    result = await analyzer.diagnose(
        query,
        progress_callback=print_progress
    )

    # 4. è¾“å‡ºç»“æœ
    print_diagnosis(result)
    save_report(result)
```

---

### 2. åˆ†ç±»å±‚

**æ–‡ä»¶**: `kube_ovn_checker/classifier.py`

**èŒè´£**:
- å°†ç”¨æˆ·æŸ¥è¯¢åˆ†ç±»åˆ° 5 ä¸ªåœºæ™¯
- è§¦å‘ç›¸å…³çŸ¥è¯†åº“æ³¨å…¥

**æ”¯æŒçš„åœºæ™¯**:
```python
class DiagnosisCategory(Enum):
    GENERAL = "general"                    # é€šç”¨æŸ¥è¯¢
    POD_TO_POD = "pod_to_pod"             # åŒèŠ‚ç‚¹ Pod é€šä¿¡
    POD_TO_POD_CROSS_NODE = "pod_to_pod_cross_node"  # è·¨èŠ‚ç‚¹ Pod é€šä¿¡
    POD_TO_SERVICE = "pod_to_service"     # Service è®¿é—®
    POD_TO_EXTERNAL = "pod_to_external"   # å¤–éƒ¨ç½‘ç»œè®¿é—®
```

**åˆ†ç±»å™¨å·¥ä½œæµç¨‹**:
```
ç”¨æˆ·æŸ¥è¯¢
    â†“
LLM åˆ†ç±» (gpt-4o-mini)
    â†“
softmax æ¦‚ç‡è®¡ç®—
    â†“
ç½®ä¿¡åº¦ > 0.7?
    â†“ æ˜¯
è¿”å›åœºæ™¯åˆ†ç±»
    â†“ å¦
è¿”å› GENERAL (é»˜è®¤)
```

---

### 3. Agent å±‚

**æ–‡ä»¶**: `kube_ovn_checker/analyzers/llm_agent_analyzer.py`

**æ ¸å¿ƒç±»**: `LLMAgentAnalyzer`

**çŠ¶æ€æœº** (LangGraph):
```python
from langgraph.graph import StateGraph

class AgentState(TypedDict):
    query: str
    category: str
    t0_result: Dict
    collected_evidence: List[Dict]
    current_hypothesis: str
    rounds: int
    diagnosis: Optional[Diagnosis]

# å®šä¹‰çŠ¶æ€è½¬æ¢
workflow = StateGraph(AgentState)

workflow.add_node("t0_check", t0_check_node)
workflow.add_node("analyze", analyze_node)
workflow.add_node("collect", collect_node)
workflow.add_node("conclude", conclude_node)

workflow.add_edge("t0_check", "analyze")
workflow.add_conditional_edges(
    "analyze",
    should_collect_more,
    {
        "collect": "collect",
        "conclude": "conclude"
    }
)
workflow.add_edge("collect", "analyze")

workflow.set_entry_point("t0_check")
workflow.set_finish_point("conclude")
```

**ReAct å¾ªç¯**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åˆ†æå½“å‰çŠ¶æ€                         â”‚
â”‚  - æŸ¥çœ‹ T0 ç»“æœ                      â”‚
â”‚  - æŸ¥çœ‹å·²æ”¶é›†è¯æ®                     â”‚
â”‚  - å½¢æˆæˆ–æ›´æ–°å‡è®¾                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ¨ç† (Thought)                       â”‚
â”‚  - éœ€è¦ä»€ä¹ˆä¿¡æ¯?                     â”‚
â”‚  - å“ªäº›å·¥å…·èƒ½æä¾›?                   â”‚
â”‚  - æ˜¯å¦å·²ç»æ”¶æ•›åˆ°æ ¹å› ?                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                   â†“
[éœ€è¦æ›´å¤šä¿¡æ¯]      [å·²æ”¶æ•›]
    â†“                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¡ŒåŠ¨ (Action)                        â”‚
â”‚  - é€‰æ‹©å·¥å…·                           â”‚
â”‚  - æ‰§è¡Œæ”¶é›†                           â”‚
â”‚  - æ›´æ–°è¯æ®                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
    è¿”å›åˆ†æçŠ¶æ€
```

**ç³»ç»Ÿæç¤ºè¯ç»“æ„**:
```python
SYSTEM_PROMPT = """
ä½ æ˜¯ä¸€ä¸ª Kube-OVN ç½‘ç»œè¯Šæ–­ä¸“å®¶ã€‚

## è¯Šæ–­æ–¹æ³•è®º
1. **T0 å¿«é€Ÿæ£€æŸ¥** - æ‰«ææ ¸å¿ƒç»„ä»¶å¥åº·çŠ¶æ€
2. **å½¢æˆå‡è®¾** - åŸºäº T0 ç»“æœå½¢æˆåˆæ­¥å‡è®¾
3. **éªŒè¯å‡è®¾** - ä½¿ç”¨å·¥å…·æ”¶é›†è¯æ®éªŒè¯
4. **æ›´æ–°æˆ–æ¨ç¿»** - æ ¹æ®è¯æ®æ›´æ–°å‡è®¾
5. **æ”¶æ•›åˆ°æ ¹å› ** - é‡å¤ 3-4 ç›´åˆ°æ‰¾åˆ°æ ¹å› 

## å·¥å…·ä¼˜å…ˆçº§
- P0: ovn-trace (é€»è¾‘è·¯å¾„åˆ†æï¼Œé¦–é€‰)
- P1: ovn-nbctl, ovn-sbctl (é…ç½®æ£€æŸ¥)
- P2: æ—¥å¿—æ”¶é›† (è¯¦ç»†åˆ†æ)
- P3: tcpdump (æµé‡æŠ“åŒ…ï¼Œæœ€åæ‰‹æ®µ)

## åœæ­¢æ¡ä»¶
- å·²æ‰¾åˆ°æ˜ç¡®çš„æ ¹å› 
- å·²æ’é™¤æ‰€æœ‰å¯èƒ½åŸå› 
- è¾¾åˆ°æœ€å¤§è½®æ•°é™åˆ¶

## è¾“å‡ºæ ¼å¼
ä¸¥æ ¼æŒ‰ç…§ JSON æ ¼å¼è¾“å‡ºè¯Šæ–­ç»“æœï¼ŒåŒ…å«ï¼š
- issue: é—®é¢˜æè¿°
- root_cause: æ ¹æœ¬åŸå› 
- severity: ä¸¥é‡åº¦ (high/medium/low)
- solutions: è§£å†³æ–¹æ¡ˆåˆ—è¡¨
"""
```

---

### 4. å·¥å…·å±‚

**æ–‡ä»¶**: `kube_ovn_checker/analyzers/tools/__init__.py`

**å·¥å…·åˆ†ç±»**:

#### Pod å·¥å…· (4 ä¸ª)
```python
@tool
async def collect_pod_logs(
    pod_name: str,
    namespace: str,
    tail_lines: int = 100
) -> str:
    """æ”¶é›† Pod æ—¥å¿—

    ç”¨äº:
    - æŸ¥çœ‹åº”ç”¨é”™è¯¯ä¿¡æ¯
    - åˆ†æå®¹å™¨å¯åŠ¨å¤±è´¥åŸå› 
    - æ£€æŸ¥åº”ç”¨å¼‚å¸¸è¡Œä¸º
    """
    # å®ç°...

@tool
async def collect_pod_events(
    pod_name: str,
    namespace: str
) -> str:
    """æ”¶é›† Pod äº‹ä»¶

    ç”¨äº:
    - æŸ¥çœ‹ Pod çŠ¶æ€å˜åŒ–å†å²
    - åˆ†æè°ƒåº¦å¤±è´¥åŸå› 
    - æ£€æŸ¥èµ„æºé™åˆ¶é—®é¢˜
    """
    # å®ç°...
```

#### Subnet å·¥å…· (1 ä¸ª)
```python
@tool
async def collect_subnet_status(
    subnet_name: str
) -> str:
    """æ”¶é›† Subnet çŠ¶æ€

    è¿”å›:
    - IP ä½¿ç”¨ç‡
    - CIDR é…ç½®
    - ç½‘å…³é…ç½®
    - å¯ç”¨ IP æ•°é‡
    """
    # å®ç°...
```

#### Node å·¥å…· (6 ä¸ª)
```python
@tool
async def collect_node_info(
    node_name: str
) -> str:
    """æ”¶é›†èŠ‚ç‚¹åŸºæœ¬ä¿¡æ¯"""

@tool
async def collect_node_ip_addr(
    node_name: str
) -> str:
    """æ”¶é›†èŠ‚ç‚¹ IP åœ°å€"""

@tool
async def collect_node_ip_route(
    node_name: str
) -> str:
    """æ”¶é›†èŠ‚ç‚¹è·¯ç”±è¡¨"""
```

#### OVN/OVS å·¥å…· (7 ä¸ª)
```python
@tool
async def collect_ovn_trace(...) -> str:
    """OVN å¾®æµè¿½è¸ª â­ é¦–é€‰å·¥å…·

    ä¸ºä»€ä¹ˆä¼˜å…ˆ:
    - é€»è¾‘è·¯å¾„åˆ†æï¼Œä¸ä¾èµ–å®é™…æµé‡
    - å¿«é€Ÿè¿”å›å®Œæ•´è·¯å¾„
    - æ˜¾ç¤ºæ¯ä¸ªèŠ‚ç‚¹çš„å¤„ç†é€»è¾‘
    - å‡†ç¡®æ€§é«˜
    """

@tool
async def collect_ovn_nbctl(...) -> str:
    """OVN åŒ—å‘ DB æ“ä½œ"""

@tool
async def collect_ovn_sbctl(...) -> str:
    """OVN å—å‘ DB æ“ä½œ"""
```

**å·¥å…·æ¥å£è§„èŒƒ**:
```python
from langchain_core.tools import tool
from pydantic import BaseModel, Field

class ToolInputSchema(BaseModel):
    """å·¥å…·è¾“å…¥å‚æ•°å®šä¹‰"""

    param1: str = Field(
        ...,
        description="å‚æ•°1çš„è¯´æ˜"
    )
    param2: int = Field(
        default=100,
        description="å‚æ•°2çš„è¯´æ˜ï¼Œé»˜è®¤å€¼100"
    )

@tool(args_schema=ToolInputSchema)
async def my_tool(
    param1: str,
    param2: int = 100
) -> str:
    """å·¥å…·æè¿°ï¼ˆç”¨äº LLM ç†è§£ï¼‰

    è¯¦ç»†è¯´æ˜å·¥å…·çš„åŠŸèƒ½ã€ä½¿ç”¨åœºæ™¯ã€è¿”å›å€¼æ ¼å¼ã€‚

    Returns:
        JSON æ ¼å¼çš„å­—ç¬¦ä¸²
    """
    # å®ç°...
    return json.dumps(result)
```

---

### 5. æ”¶é›†å±‚

**æ–‡ä»¶**: `kube_ovn_checker/collectors/resource_collector.py`

**æ ¸å¿ƒç±»**: `K8sResourceCollector`

**ç‰¹ç‚¹**:
- **å¼‚æ­¥å¹¶å‘**: ä½¿ç”¨ `asyncio.gather()`
- **ç¼“å­˜æœºåˆ¶**: é¿å…é‡å¤ API è°ƒç”¨
- **ç»Ÿä¸€æ ¼å¼**: æ‰€æœ‰å·¥å…·è¿”å›ç›¸åŒç»“æ„

**å¼‚æ­¥å¹¶å‘ç¤ºä¾‹**:
```python
async def collect_multiple_pods(
    pod_names: List[str],
    namespace: str
) -> List[Dict]:
    """å¹¶å‘æ”¶é›†å¤šä¸ª Pod çš„ä¿¡æ¯"""

    # åˆ›å»ºå¹¶å‘ä»»åŠ¡
    tasks = [
        collect_pod_logs(name, namespace)
        for name in pod_names
    ]

    # å¹¶å‘æ‰§è¡Œ
    results = await asyncio.gather(*tasks)

    return results
```

**ç¼“å­˜æœºåˆ¶**:
```python
from functools import lru_cache

class K8sResourceCollector:
    @lru_cache(maxsize=128)
    async def get_pod_info(
        self,
        pod_name: str,
        namespace: str
    ) -> Dict:
        """å¸¦ç¼“å­˜çš„ Pod ä¿¡æ¯è·å–"""
        # å®ç°...
```

**ç»Ÿä¸€è¿”å›æ ¼å¼**:
```python
@dataclass
class CollectionResult:
    success: bool
    data: Optional[Dict]
    error: Optional[str]
    metadata: Dict

def format_result(
    success: bool,
    data: Any,
    error: str = None
) -> str:
    """æ ¼å¼åŒ–ä¸ºç»Ÿä¸€ JSON"""
    result = CollectionResult(
        success=success,
        data=data if success else None,
        error=error,
        metadata={
            "timestamp": datetime.now().isoformat(),
            "collector": "K8sResourceCollector"
        }
    )
    return json.dumps(asdict(result))
```

---

### 6. çŸ¥è¯†åº“å±‚

**æ–‡ä»¶**: `kube_ovn_checker/knowledge/`

**çŸ¥è¯†åº“ç»“æ„**:
```
knowledge/
â”œâ”€â”€ principles/              # æŠ€æœ¯åŸç† (12 ä¸ªæ–‡æ¡£)
â”‚   â”œâ”€â”€ control-plane/
â”‚   â”‚   â”œâ”€â”€ control-plane-architecture.md
â”‚   â”‚   â””â”€â”€ control-plane-reference.md
â”‚   â””â”€â”€ dataplane/
â”‚       â”œâ”€â”€ pod-communication/
â”‚       â”œâ”€â”€ node-communication/
â”‚       â””â”€â”€ service-communication/
â”‚
â””â”€â”€ workflows/               # è¯Šæ–­å·¥ä½œæµ (3 ä¸ªæ–‡æ¡£)
    â”œâ”€â”€ network-connectivity.md
    â”œâ”€â”€ ip-management.md
    â””â”€â”€ general.md
```

**çŸ¥è¯†æ³¨å…¥æœºåˆ¶**:
```python
class KnowledgeInjector:
    async def inject_for_scenario(
        self,
        category: DiagnosisCategory,
        query: str
    ) -> str:
        """ä¸ºç‰¹å®šåœºæ™¯æ³¨å…¥ç›¸å…³çŸ¥è¯†"""

        # 1. å…ƒæ•°æ®å¿«é€ŸåŒ¹é…
        docs = self.retriever.retrieve_by_metadata(
            category=category,
            triggers=self._extract_triggers(query)
        )

        # 2. LLM æ™ºèƒ½æ£€ç´¢
        if not docs:
            docs = await self.llm_retriever.retrieve(query)

        # 3. é™åˆ¶é•¿åº¦
        content = self._limit_length(docs, max_tokens=2000)

        return content
```

**å…ƒæ•°æ®ç¤ºä¾‹**:
```markdown
---
triggers:
  - ovn-trace
  - logical flow
  - microflow
  - path

category: principle
priority: 90
---

# OVN å¾®æµè¿½è¸ªåŸç†

## ä»€ä¹ˆæ˜¯ ovn-trace
...
```

---

## æ¨¡å—ä¾èµ–å…³ç³»

```mermaid
graph TD
    CLI[CLI å±‚] --> Classifier[åˆ†ç±»å±‚]
    CLI --> Agent[Agent å±‚]

    Classifier --> Knowledge[çŸ¥è¯†åº“å±‚]
    Agent --> Knowledge

    Agent --> Tools[å·¥å…·å±‚]
    Tools --> Collector[æ”¶é›†å±‚]
    Collector --> K8s[K8s API]

    Knowledge --> Principles[åŸç†æ–‡æ¡£]
    Knowledge --> Workflows[å·¥ä½œæµæ–‡æ¡£]
```

## æ•°æ®æµ

```
ç”¨æˆ·æŸ¥è¯¢
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ™ºèƒ½åˆ†ç±» + çŸ¥è¯†æ£€ç´¢                  â”‚
â”‚ - åˆ†ç±»åœºæ™¯                           â”‚
â”‚ - æ³¨å…¥ç›¸å…³çŸ¥è¯†                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ T0 å¿«é€Ÿæ£€æŸ¥                          â”‚
â”‚ - å¹¶å‘æ‰§è¡Œ 20+ æ£€æŸ¥                  â”‚
â”‚ - 10ç§’å†…å®Œæˆ                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent å¾ªç¯ (å¤šè½®)                    â”‚
â”‚                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚åˆ†æçŠ¶æ€â”‚ â†’ â”‚æ¨ç†  â”‚ â†’ â”‚å†³ç­–  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â†“      â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                      â”‚é€‰æ‹©å·¥å…·  â”‚ â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                             â†“      â”‚
â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                      â”‚æ”¶é›†æ•°æ®  â”‚ â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç”Ÿæˆè¯Šæ–­ç»“æœ                         â”‚
â”‚ - æ ¹å› åˆ†æ                           â”‚
â”‚ - è§£å†³æ–¹æ¡ˆ                           â”‚
â”‚ - è¯æ®é“¾                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ€»ç»“

æ„å»ºå—è§†å›¾å±•ç¤ºäº†ç³»ç»Ÿçš„åˆ†å±‚æ¶æ„å’Œæ¨¡å—èŒè´£ï¼š

1. **CLI å±‚** - ç”¨æˆ·æ¥å£
2. **åˆ†ç±»å±‚** - åœºæ™¯è¯†åˆ«
3. **Agent å±‚** - æ™ºèƒ½å†³ç­–
4. **å·¥å…·å±‚** - èƒ½åŠ›å°è£…
5. **æ”¶é›†å±‚** - æ•°æ®è·å–
6. **çŸ¥è¯†åº“å±‚** - ä¸“å®¶çŸ¥è¯†

è¿™ç§åˆ†å±‚è®¾è®¡ç¡®ä¿äº†ç³»ç»Ÿçš„ï¼š
- âœ… **å¯ç»´æŠ¤æ€§** - èŒè´£æ¸…æ™°
- âœ… **å¯æ‰©å±•æ€§** - æ˜“äºæ·»åŠ å·¥å…·
- âœ… **å¯æµ‹è¯•æ€§** - æ¨¡å—ç‹¬ç«‹
```

---

#### 3. runtime-view.md (P0 - ç†è§£æµç¨‹)

**å†…å®¹ç»“æ„**ï¼š
```markdown
# âš™ï¸ è¿è¡Œæ—¶è§†å›¾

## å…³é”®åœºæ™¯ 1: Pod ç½‘ç»œè¿é€šæ€§è¯Šæ–­

### æ—¶åºå›¾

```mermaid
sequenceDiagram
    participant User as ç”¨æˆ·
    participant CLI as CLI
    participant Classifier as æ™ºèƒ½åˆ†ç±»
    participant Agent as LLM Agent
    participant T0 as T0 æ”¶é›†å™¨
    participant Tools as å·¥å…·é›†
    participant K8s as K8s API
    participant LLM as LLM æœåŠ¡

    User->>CLI: ./kube-ovn-checker "Pod A æ— æ³•è®¿é—® Pod B"
    CLI->>Classifier: classify_query(query)
    Classifier->>LLM: åˆ†ç±»è¯·æ±‚
    LLM-->>Classifier: POD_TO_POD (ç½®ä¿¡åº¦ 0.92)
    Classifier-->>Agent: category + context

    Agent->>T0: execute_t0_check()
    par å¹¶å‘æ‰§è¡Œ
        T0->>K8s: æ£€æŸ¥ Deployments
        T0->>K8s: æ£€æŸ¥ DaemonSets
        T0->>K8s: æ£€æŸ¥ Endpoints
    end
    T0-->>Agent: T0 ç»“æœ

    Agent->>LLM: åˆ†æ T0 + æ¨ç†ä¸‹ä¸€æ­¥
    LLM-->>Agent: Thought: éœ€è¦éªŒè¯ OVN é€»è¾‘è·¯å¾„
    Agent->>Tools: collect_ovn_trace(src=PodA, dst=PodB)
    Tools->>K8s: kubectl exec ovn-controller -- ovn-trace
    K8s-->>Tools: é€»è¾‘è·¯å¾„ç»“æœ
    Tools-->>Agent: Trace ç»“æœ (drop at ACL)

    Agent->>LLM: åˆ†æ Trace ç»“æœ
    LLM-->>Agent: ç»“è®º: NetworkPolicy æ‹’ç»æµé‡
    Agent-->>CLI: diagnosis_result
    CLI-->>User: æ˜¾ç¤ºç»“æœ + ä¿å­˜æŠ¥å‘Š
```

### è¯¦ç»†æ­¥éª¤

#### æ­¥éª¤ 1: æŸ¥è¯¢åˆ†ç±» (0.5 ç§’)
```python
# classifier.py
async def classify(query: str) -> DiagnosisCategory:
    response = await llm_client.chat.completions.create(
        model="gpt-4o-mini",
        messages=[{
            "role": "system",
            "content": "åˆ†ç±»æŸ¥è¯¢åˆ°ä»¥ä¸‹åœºæ™¯..."
        }, {
            "role": "user",
            "content": query
        }]
    )

    # softmax æ¦‚ç‡
    probs = softmax(response.logits)
    max_prob = max(probs)

    if max_prob > 0.7:
        return categories[probs.index(max_prob)]
    else:
        return DiagnosisCategory.GENERAL
```

#### æ­¥éª¤ 2: T0 å¿«é€Ÿæ£€æŸ¥ (10 ç§’)
```python
# t0_collector.py
async def execute_t0_check() -> Dict:
    """å¹¶å‘æ‰§è¡Œæ‰€æœ‰ T0 æ£€æŸ¥"""

    tasks = [
        check_deployments(),
        check_daemonsets(),
        check_endpoints(),
        check_controller_health(),
        check_pod_statistics(),
        check_subnet_overview()
    ]

    results = await asyncio.gather(*tasks)

    return {
        "healthy_components": [...],
        "unhealthy_components": [...],
        "warnings": [...],
        "duration_seconds": 9.8
    }
```

#### æ­¥éª¤ 3: Agent ç¬¬ 1 è½®æ¨ç†
**è¾“å…¥**:
- ç”¨æˆ·æŸ¥è¯¢: "Pod A æ— æ³•è®¿é—® Pod B"
- åˆ†ç±»ç»“æœ: `POD_TO_POD` (ç½®ä¿¡åº¦ 0.92)
- T0 ç»“æœ: æ‰€æœ‰ç»„ä»¶å¥åº·

**LLM Thought**:
```
åˆ†æ T0 ç»“æœ:
- æ‰€æœ‰æ ¸å¿ƒç»„ä»¶å¥åº· âœ“
- æ²¡æœ‰æ˜æ˜¾çš„é…ç½®é”™è¯¯
- ç”¨æˆ·æè¿°çš„æ˜¯ Pod é—´é€šä¿¡é—®é¢˜

éœ€è¦éªŒè¯:
1. Pod æ˜¯å¦åœ¨åŒä¸€èŠ‚ç‚¹ï¼Ÿï¼ˆè·¨èŠ‚ç‚¹ vs åŒèŠ‚ç‚¹ï¼‰
2. OVN é€»è¾‘è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼Ÿ
3. NetworkPolicy æ˜¯å¦é˜»æ­¢ï¼Ÿ

å·¥å…·é€‰æ‹©:
ä¼˜å…ˆä½¿ç”¨ collect_ovn_traceï¼Œå› ä¸ºå®ƒèƒ½å¿«é€Ÿæ˜¾ç¤ºé€»è¾‘è·¯å¾„
```

**å·¥å…·è°ƒç”¨**:
```python
await collect_ovn_trace(
    src_pod="pod-a",
    src_namespace="default",
    dst_ip="10.16.0.5",
    dst_port=80
)
```

#### æ­¥éª¤ 4: Agent ç¬¬ 2 è½®æ¨ç†
**è¾“å…¥**:
- ä¸Šè½®è¯æ®: `ovn-trace` æ˜¾ç¤º `drop` åœ¨ `ACL` è§„åˆ™

**LLM Thought**:
```
åˆ†æ ovn-trace ç»“æœ:
- é€»è¾‘è·¯å¾„: `ls_inp` â†’ `ls_in_lb` â†’ `ls_in_acl`
- Drop ç‚¹: `ls_in_acl` è§„åˆ™ 1001
- Drop åŸå› : `NetworkPolicy default/deny-all`

ç»“è®º:
- NetworkPolicy `deny-all` é˜»æ­¢äº†æµé‡
- éœ€è¦æ£€æŸ¥ NetworkPolicy é…ç½®
- å¯èƒ½ç”¨æˆ·éœ€è¦åˆ›å»ºç‰¹å®šçš„å…è®¸è§„åˆ™

ä¸‹ä¸€æ­¥:
æ”¶é›† NetworkPolicy è¯¦æƒ…ä»¥ç¡®è®¤
```

**å·¥å…·è°ƒç”¨**:
```python
await collect_network_policies(
    namespace="default"
)
```

#### æ­¥éª¤ 5: Agent ç¬¬ 3 è½®æ¨ç† - æ”¶æ•›
**è¾“å…¥**:
- NetworkPolicy åˆ—è¡¨: ç¡®è®¤å­˜åœ¨ `deny-all` ç­–ç•¥

**LLM Thought**:
```
éªŒè¯å‡è®¾:
- NetworkPolicy `deny-all` å­˜åœ¨ âœ“
- æ²¡æœ‰é’ˆå¯¹ Pod A çš„å…è®¸è§„åˆ™ âœ“
- ovn-trace æ˜¾ç¤ºæµé‡è¢«æ‹’ç» âœ“

ç»“è®ºå·²æ˜ç¡®:
æ ¹æœ¬åŸå› : NetworkPolicy é˜»æ­¢äº† Pod é—´é€šä¿¡
ä¸¥é‡åº¦: High
è§£å†³æ–¹æ¡ˆ: åˆ›å»ºå…è®¸ç‰¹å®šæµé‡çš„ NetworkPolicy

å¯ä»¥åœæ­¢è¯Šæ–­ï¼Œè¾“å‡ºç»“æœ
```

**ç”Ÿæˆè¯Šæ–­ç»“æœ**:
```json
{
  "issue": "Pod A æ— æ³•è®¿é—® Pod B",
  "root_cause": {
    "category": "NetworkPolicy é…ç½®",
    "specific_cause": "NetworkPolicy 'deny-all' é˜»æ­¢äº†æ‰€æœ‰ Pod é—´æµé‡ï¼Œä¸”æ²¡æœ‰åˆ›å»ºå…è®¸è§„åˆ™",
    "confidence": "high"
  },
  "severity": "high",
  "solutions": [
    {
      "priority": 1,
      "title": "åˆ›å»ºå…è®¸ç‰¹å®šæµé‡çš„ NetworkPolicy",
      "description": "å…è®¸ Pod A è®¿é—® Pod B",
      "commands": [
        "kubectl apply -f - <<EOF\napiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: allow-a-to-b\nspec:\n  podSelector:\n    matchLabels:\n      app: pod-a\n  policyTypes:\n  - Egress\n  egress:\n  - to:\n    - podSelector:\n        matchLabels:\n          app: pod-b\n    ports:\n    - protocol: TCP\n      port: 80\nEOF\n"
      ]
    }
  ],
  "evidence": {
    "t0_check": {...},
    "ovn_trace": "drop at ACL",
    "network_policies": ["deny-all"]
  },
  "diagnosis_status": "completed",
  "rounds": 3
}
```

---

## å…³é”®åœºæ™¯ 2: Subnet IP è€—å°½è¯Šæ–­

### çŠ¶æ€æœºå›¾

```mermaid
stateDiagram-v2
    [*] --> T0Check: å¼€å§‹è¯Šæ–­

    T0Check --> AnalyzingT0: å®Œæˆ (10s)

    AnalyzingT0 --> FormingHypothesis: IP ä½¿ç”¨ç‡ 95%

    FormingHypothesis --> CollectingSubnet: å‡è®¾: IP è€—å°½

    CollectingSubnet --> ValidatingHypothesis: Subnet çŠ¶æ€

    ValidatingHypothesis --> ConfirmingRootCause: éªŒè¯å‡è®¾

    ConfirmingRootCause --> GeneratingSolution: ç¡®è®¤æ ¹å› 

    GeneratingSolution --> [*]: è¾“å‡ºç»“æœ

    note right of FormingHypothesis
        å‡è®¾: Subnet IP è€—å°½
        ä¾æ®: T0 æ˜¾ç¤º IP ä½¿ç”¨ç‡ 95%
    end note

    note right of ValidatingHypothesis
        æ”¶é›†è¯æ®:
        - Subnet è¯¦ç»†çŠ¶æ€
        - IP åˆ†é…æƒ…å†µ
        - åƒµå°¸ IP æ£€æŸ¥
    end note
```

### Agent å†…éƒ¨çŠ¶æ€è½¬æ¢

```python
class AgentState:
    query: str
    category: DiagnosisCategory
    t0_result: Optional[Dict] = None
    collected_evidence: List[Dict] = []
    current_hypothesis: Optional[str] = None
    hypothesis_confidence: float = 0.0
    rounds: int = 0

# çŠ¶æ€è½¬æ¢æ—¥å¿—
# Round 0: åˆå§‹åŒ–
#   - hypothesis: None
#   - confidence: 0.0

# Round 1: T0 æ£€æŸ¥å
#   - hypothesis: "Subnet IP å¯èƒ½è€—å°½"
#   - confidence: 0.6
#   - evidence: ["T0: IP ä½¿ç”¨ç‡ 95%"]

# Round 2: æ”¶é›† Subnet çŠ¶æ€å
#   - hypothesis: "Subnet IP è€—å°½"
#   - confidence: 0.85
#   - evidence: [..., "Subnet: å¯ç”¨ IP 3277 / æ€» 65536"]

# Round 3: éªŒè¯å
#   - hypothesis: "ç¡®è®¤ IP è€—å°½"
#   - confidence: 0.95
#   - evidence: [..., "åƒµå°¸ IP: 125 ä¸ª", "æ´»è·ƒ Pod: 62134 ä¸ª"]
```

---

## æ€§èƒ½ç‰¹å¾

### æ—¶é—´åˆ†è§£

| é˜¶æ®µ | è€—æ—¶ | è¯´æ˜ |
|-----|------|------|
| æŸ¥è¯¢åˆ†ç±» | 0.5s | LLM åˆ†ç±» (gpt-4o-mini) |
| T0 æ£€æŸ¥ | 10s | å¹¶å‘æ‰§è¡Œ 20+ æ£€æŸ¥ |
| Agent æ¯è½® | 5-15s | LLM æ¨ç† + å·¥å…·æ‰§è¡Œ |
| **æ€»è®¡ (3 è½®)** | **30-60s** | å¤§éƒ¨åˆ†é—®é¢˜åœ¨ 3 è½®å†…è§£å†³ |

### å¹¶å‘æ€§èƒ½

```python
# T0 æ£€æŸ¥å¹¶å‘æ‰§è¡Œ
import asyncio

async def t0_check():
    # 20+ æ£€æŸ¥å¹¶å‘æ‰§è¡Œ
    tasks = [
        check_deployments(),      # 2s
        check_daemonsets(),       # 2s
        check_endpoints(),        # 1s
        check_pod_stats(),        # 3s
        check_subnet_status(),    # 2s
        ...
    ]

    # æ€»è€—æ—¶ = max(å„ä»»åŠ¡) â‰ˆ 10s
    # è€Œé sum(å„ä»»åŠ¡) â‰ˆ 50s
    results = await asyncio.gather(*tasks)
```

### ç¼“å­˜æ•ˆæœ

| æ•°æ®ç±»å‹ | ç¼“å­˜æ—¶é—´ | å‘½ä¸­ç‡ | æ€§èƒ½æå‡ |
|---------|---------|--------|---------|
| Pod åˆ—è¡¨ | 30s | 80% | 10x |
| Subnet çŠ¶æ€ | 60s | 90% | 5x |
| Node ä¿¡æ¯ | 120s | 95% | 3x |

---

## é”™è¯¯å¤„ç†

### å·¥å…·è°ƒç”¨å¤±è´¥

```python
@tool
async def collect_pod_logs(pod_name: str, namespace: str) -> str:
    try:
        logs = await k8s_client.get_pod_logs(pod_name, namespace)
        return format_result(success=True, data=logs)

    except PodNotFoundError as e:
        # å·¥å…·çº§åˆ«é”™è¯¯
        return format_result(
            success=False,
            error=f"Pod {pod_name} not found in {namespace}"
        )

    except KubeAPIError as e:
        # API é”™è¯¯ï¼Œå¯é‡è¯•
        if e.status == 503:
            retry_with_backoff()
        else:
            return format_result(
                success=False,
                error=f"K8s API error: {e.message}"
            )
```

### Agent å±‚é¢é™çº§

```python
# llm_agent_analyzer.py
async def diagnose_with_fallback(query: str):
    try:
        # å°è¯• LLM è¯Šæ–­
        result = await agent_diagnose(query)

        if result.confidence < 0.6:
            # ç½®ä¿¡åº¦ä½ï¼Œä½¿ç”¨è§„åˆ™å…œåº•
            return fallback_diagnose(query)

        return result

    except LLMTimeoutError:
        # LLM è¶…æ—¶ï¼Œé™çº§åˆ°è§„åˆ™
        logger.warning("LLM timeout, using fallback")
        return fallback_diagnose(query)

    except LLMQuotaExceededError:
        # API é…é¢ç”¨å®Œï¼Œé™çº§åˆ°è§„åˆ™
        logger.error("LLM quota exceeded")
        return fallback_diagnose(query)
```

---

## èµ„æºæ¶ˆè€—

### å…¸å‹èµ„æºä½¿ç”¨

| åœºæ™¯ | å†…å­˜ | CPU | API è°ƒç”¨ |
|-----|------|-----|---------|
| å°é›†ç¾¤ (<50 èŠ‚ç‚¹) | 200MB | 1 core | 5-10 æ¬¡ |
| ä¸­å‹é›†ç¾¤ (50-200) | 500MB | 2 cores | 10-20 æ¬¡ |
| å¤§å‹é›†ç¾¤ (>200) | 1GB | 4 cores | 20-50 æ¬¡ |

### æˆæœ¬ä¼°ç®—

ä»¥ OpenAI GPT-4o ä¸ºä¾‹ï¼š

| è½®æ•° | Input Tokens | Output Tokens | æˆæœ¬ (USD) |
|-----|-------------|---------------|-----------|
| 3 è½® | ~8,000 | ~2,000 | ~$0.10 |
| 5 è½® | ~15,000 | ~3,500 | ~$0.20 |
| 10 è½® | ~30,000 | ~7,000 | ~$0.40 |

**ä¼˜åŒ–å»ºè®®**:
- ä½¿ç”¨ `gpt-4o-mini` é™ä½æˆæœ¬ (~1/10)
- å¯ç”¨ç¼“å­˜å‡å°‘é‡å¤è°ƒç”¨
- æœ¬åœ° Ollama é›¶æˆæœ¬

---

## æ€»ç»“

è¿è¡Œæ—¶è§†å›¾å±•ç¤ºäº†ç³»ç»Ÿçš„åŠ¨æ€è¡Œä¸ºï¼š

1. **å¤šé˜¶æ®µæµç¨‹** - åˆ†ç±» â†’ T0 â†’ Agent å¾ªç¯ â†’ ç»“è®º
2. **å¹¶å‘æ€§èƒ½** - T0 å¹¶å‘æ‰§è¡Œï¼Œ10 ç§’å®Œæˆ
3. **çŠ¶æ€ç®¡ç†** - LangGraph ç®¡ç† Agent çŠ¶æ€
4. **é”™è¯¯å¤„ç†** - å·¥å…·çº§å’Œ Agent çº§é™çº§
5. **èµ„æºæ¶ˆè€—** - å†…å­˜ã€CPUã€API æˆæœ¬å¯æ§
```

---

## ğŸ’» æ–‡æ¡£ä¸‰ï¼šè¯¦ç»†å®ç°æ–‡æ¡£ (Implementation)

### ç›®æ ‡
å¸®åŠ©å¼€å‘è€…ç†è§£å®ç°ç»†èŠ‚ã€æ‰©å±•å·¥å…·ã€è´¡çŒ®ä»£ç ã€‚

### æ–‡æ¡£ç»“æ„

```
docs/developer-guide/
â”œâ”€â”€ README.md                      # å¯¼èˆªæ–‡æ¡£
â”œâ”€â”€ development-setup.md           # å¼€å‘ç¯å¢ƒè®¾ç½® â­ P0
â”œâ”€â”€ code-structure.md              # ä»£ç ç»“æ„è¯¦è§£ â­ P0
â”œâ”€â”€ adding-tools.md                # æ·»åŠ æ–°å·¥å…·æ•™ç¨‹ â­ P0
â”œâ”€â”€ testing.md                     # æµ‹è¯•æŒ‡å— â­ P1
â”œâ”€â”€ debugging.md                   # è°ƒè¯•æŠ€å·§ â­ P1
â”œâ”€â”€ api-reference.md               # API å‚è€ƒ â­ P1
â”œâ”€â”€ contributing.md                # è´¡çŒ®æŒ‡å— â­ P1
â””â”€â”€ release-process.md             # å‘å¸ƒæµç¨‹ â­ P2
```

### æ ¸å¿ƒå†…å®¹è¦ç‚¹

#### 1. development-setup.md (P0 - å¼€å‘è€…å…¥é—¨)

**å†…å®¹ç»“æ„**ï¼š
```markdown
# ğŸš€ å¼€å‘ç¯å¢ƒè®¾ç½®

## ç³»ç»Ÿè¦æ±‚

### å¿…éœ€
- Python 3.9+
- Poetry æˆ– pip
- Git
- ä»£ç ç¼–è¾‘å™¨ (VS Code / PyCharm)

### æ¨è
- Docker (ç”¨äºæµ‹è¯•)
- kubectl (ç”¨äºæœ¬åœ°æµ‹è¯•)
- Kind æˆ– Minikube (æœ¬åœ° K8s é›†ç¾¤)

## å®‰è£…æ­¥éª¤

### 1. å…‹éš†ä»“åº“
\```bash
git clone https://github.com/xxx/kube-ovn-langgraph-checker.git
cd kube-ovn-langgraph-checker
\```

### 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
\```bash
# ä½¿ç”¨ venv
python -m venv venv
source venv/bin/activate  # Linux/macOS
# æˆ–
venv\Scripts\activate  # Windows

# ä½¿ç”¨ poetry (æ¨è)
poetry install
\```

### 3. å®‰è£…å¼€å‘ä¾èµ–
\```bash
# å¼€å‘æ¨¡å¼å®‰è£…
pip install -e ".[dev]"

# æˆ–ä½¿ç”¨ poetry
poetry install --with dev
\```

### 4. é…ç½®ç¯å¢ƒå˜é‡
\```bash
cp .env.example .env
# ç¼–è¾‘ .envï¼Œå¡«å…¥ä½ çš„ API Key
\```

### 5. éªŒè¯å®‰è£…
\```bash
# è¿è¡Œæµ‹è¯•
pytest tests/

# è¿è¡Œå·¥å…·
./kube-ovn-checker --help
\```

## å¼€å‘å·¥å…·é…ç½®

### VS Code

**æ¨èæ‰©å±•**:
- Python
- Pylance
- Python Test Explorer
- GitLens

**`.vscode/settings.json`**:
\```json
{
  "python.linting.enabled": true,
  "python.linting.pylintEnabled": true,
  "python.formatting.provider": "black",
  "editor.formatOnSave": true,
  "python.testing.pytestEnabled": true,
  "python.testing.pytestArgs": ["tests/"]
}
\```

**`.vscode/launch.json`** (è°ƒè¯•é…ç½®):
\```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Debug CLI",
      "type": "python",
      "request": "launch",
      "module": "kube_ovn_checker.cli.main",
      "args": ["æµ‹è¯•é—®é¢˜"],
      "envFile": "${workspaceFolder}/.env",
      "console": "integratedTerminal"
    },
    {
      "name": "Run Tests",
      "type": "python",
      "request": "launch",
      "module": "pytest",
      "args": ["tests/"],
      "console": "integratedTerminal"
    }
  ]
}
\```

### PyCharm

**é…ç½®**:
1. æ‰“å¼€é¡¹ç›®åï¼Œè®¾ç½® Python è§£é‡Šå™¨ä¸ºè™šæ‹Ÿç¯å¢ƒ
2. Settings â†’ Tools â†’ Python Integrated Tools â†’ Testing â†’ pytest
3. Run â†’ Edit Configurations â†’ æ·»åŠ  Python é…ç½®

## ä»£ç é£æ ¼

### æ ¼å¼åŒ–
\```bash
# Black (æ ¼å¼åŒ–)
black kube_ovn_checker/

# isort (å¯¼å…¥æ’åº)
isort kube_ovn_checker/

# ä¸€é”®æ ¼å¼åŒ–
black kube_ovn_checker/ && isort kube_ovn_checker/
\```

### Linting
\```bash
# Pylint (ä»£ç è´¨é‡)
pylint kube_ovn_checker/

# mypy (ç±»å‹æ£€æŸ¥)
mypy kube_ovn_checker/
\```

### Pre-commit Hooks
\```bash
# å®‰è£… pre-commit
pip install pre-commit

# å®‰è£… hooks
pre-commit install

# æ‰‹åŠ¨è¿è¡Œ
pre-commit run --all-files
\```

**`.pre-commit-config.yaml`**:
\```yaml
repos:
  - repo: https://github.com/psf/black
    rev: 23.12.0
    hooks:
      - id: black
        language_version: python3.9

  - repo: https://github.com/pycqa/isort
    rev: 5.13.0
    hooks:
      - id: isort

  - repo: https://github.com/pycqa/flake8
    rev: 7.0.0
    hooks:
      - id: flake8
\```

## æµ‹è¯•

### è¿è¡Œæµ‹è¯•
\```bash
# æ‰€æœ‰æµ‹è¯•
pytest tests/

# å•ä¸ªæµ‹è¯•æ–‡ä»¶
pytest tests/test_tool_registration.py

# å¸¦è¦†ç›–ç‡
pytest --cov=kube_ovn_checker tests/

# è¯¦ç»†è¾“å‡º
pytest -v tests/
\```

### ç¼–å†™æµ‹è¯•
è§ [testing.md](testing.md)

## è°ƒè¯•

### æœ¬åœ°è°ƒè¯• CLI
\```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
export LOG_LEVEL=DEBUG

# è¿è¡Œ
python -m kube_ovn_checker.cli.main "æµ‹è¯•é—®é¢˜"
\```

### è°ƒè¯• LangGraph Agent
\```python
# åœ¨ä»£ç ä¸­æ·»åŠ æ–­ç‚¹
import pdb; pdb.set_trace()

# æˆ–ä½¿ç”¨ ipdb (æ›´å¥½ç”¨)
import ipdb; ipdb.set_trace()
\```

### æŸ¥çœ‹ LangGraph æ‰§è¡Œå›¾
\```python
from kube_ovn_checker.analyzers.llm_agent_analyzer import LLMAgentAnalyzer

analyzer = LLMAgentAnalyzer()

# ç”ŸæˆçŠ¶æ€å›¾
analyzer.graph.get_graph().print_ascii()
\```

## å¸¸ç”¨å¼€å‘ä»»åŠ¡

### æ·»åŠ æ–°å·¥å…·
è§ [adding-tools.md](adding-tools.md)

### ä¿®æ”¹çŸ¥è¯†åº“
\```bash
# çŸ¥è¯†åº“ä½ç½®
ls kube_ovn_checker/knowledge/principles/
ls kube_ovn_checker/knowledge/workflows/

# ç¼–è¾‘æ–‡æ¡£åï¼Œé‡æ–°å®‰è£…
pip install -e .
\```

### è¿è¡Œé›†æˆæµ‹è¯•
\```bash
# éœ€è¦ Kind é›†ç¾¤
kind create cluster --name test

# è¿è¡Œé›†æˆæµ‹è¯•
pytest tests/integration/

# æ¸…ç†
kind delete cluster --name test
\```

## æ€§èƒ½åˆ†æ

### Profiling
\```bash
# ä½¿ç”¨ cProfile
python -m cProfile -o profile.stats \
  -m kube_ovn_checker.cli.main "æµ‹è¯•é—®é¢˜"

# æŸ¥çœ‹ç»“æœ
python -c "
import pstats
p = pstats.Stats('profile.stats')
p.sort_stats('cumulative')
p.print_stats(20)
"
\```

### å†…å­˜åˆ†æ
\```bash
pip install memory_profiler

python -m memory_profiler \
  -m kube_ovn_checker.cli.main "æµ‹è¯•é—®é¢˜"
\```

## ä¸‹ä¸€æ­¥

- é˜…è¯» [code-structure.md](code-structure.md) äº†è§£ä»£ç ç»„ç»‡
- æŸ¥çœ‹ [adding-tools.md](adding-tools.md) å­¦ä¹ å¦‚ä½•æ‰©å±•
- é˜…è¯» [contributing.md](contributing.md) äº†è§£è´¡çŒ®æµç¨‹
```

---

#### 2. adding-tools.md (P0 - æ‰©å±•å·¥å…·)

**å†…å®¹ç»“æ„**ï¼š
```markdown
# ğŸ”§ æ·»åŠ æ–°å·¥å…·æ•™ç¨‹

## æ¦‚è¿°

æœ¬æ•™ç¨‹å°†æŒ‡å¯¼ä½ å¦‚ä½•æ·»åŠ ä¸€ä¸ªæ–°çš„è¯Šæ–­å·¥å…·åˆ° Kube-OVN Checkerã€‚

## å·¥å…·çš„ç”Ÿå‘½å‘¨æœŸ

```mermaid
graph LR
    A[å®ç°å·¥å…·å‡½æ•°] --> B[åˆ›å»º Pydantic Schema]
    B --> C[æ³¨å†Œä¸º LangChain Tool]
    C --> D[æ·»åŠ åˆ°å·¥å…·é›†]
    D --> E[ç¼–å†™å•å…ƒæµ‹è¯•]
    E --> F[æ›´æ–°æ–‡æ¡£]
```

## å®Œæ•´ç¤ºä¾‹

### åœºæ™¯
æ·»åŠ ä¸€ä¸ªæ£€æŸ¥ OVN ç‰ˆæœ¬çš„å·¥å…·

### æ­¥éª¤ 1: å®ç°æ”¶é›†å‡½æ•°

**æ–‡ä»¶**: `kube_ovn_checker/collectors/resource_collector.py`

\```python
async def collect_ovn_version(
    node_name: Optional[str] = None
) -> Dict[str, Any]:
    """æ”¶é›† OVN ç‰ˆæœ¬ä¿¡æ¯

    Args:
        node_name: èŠ‚ç‚¹åç§°ï¼ŒNone è¡¨ç¤ºæ‰€æœ‰èŠ‚ç‚¹

    Returns:
        Dict: ç‰ˆæœ¬ä¿¡æ¯
            - ovn_version: OVN ç‰ˆæœ¬
            - ovs_version: OVS ç‰ˆæœ¬
            - nodes: èŠ‚ç‚¹ç‰ˆæœ¬åˆ—è¡¨
    """
    try:
        if node_name:
            # å•ä¸ªèŠ‚ç‚¹
            cmd = f"kubectl exec {node_name} -n kube-system -- "
            cmd += "ovs-vswitchd --version"
            result = await kubectl_exec(cmd)
            # è§£æç‰ˆæœ¬...
        else:
            # æ‰€æœ‰èŠ‚ç‚¹
            nodes = await get_ovn_nodes()
            versions = {}
            for node in nodes:
                versions[node] = await collect_ovn_version(node)

        return {
            "success": True,
            "data": {
                "ovn_version": extract_version(result),
                "ovs_version": extract_ovs_version(result),
                "nodes": versions
            }
        }

    except Exception as e:
        return {
            "success": False,
            "error": str(e)
        }
\```

### æ­¥éª¤ 2: åˆ›å»º Pydantic Schema

**æ–‡ä»¶**: `kube_ovn_checker/analyzers/tools/schemas.py`

\```python
from pydantic import BaseModel, Field

class CollectOvnVersionInput(BaseModel):
    """collect_ovn_version å·¥å…·çš„è¾“å…¥å‚æ•°"""

    node_name: str = Field(
        default="",
        description="èŠ‚ç‚¹åç§°ã€‚ç©ºå­—ç¬¦ä¸²è¡¨ç¤ºæ£€æŸ¥æ‰€æœ‰èŠ‚ç‚¹"
    )
\```

### æ­¥éª¤ 3: åˆ›å»º LangChain Tool

**æ–‡ä»¶**: `kube_ovn_checker/analyzers/tools/__init__.py`

\```python
from langchain_core.tools import tool
from .schemas import CollectOvnVersionInput
from kube_ovn_checker.collectors.resource_collector import (
    collect_ovn_version
)

@tool(args_schema=CollectOvnVersionInput)
async def collect_ovn_version_tool(
    node_name: str = ""
) -> str:
    """æ”¶é›† OVN å’Œ OVS ç‰ˆæœ¬ä¿¡æ¯

    ç”¨é€”:
    - éªŒè¯ OVN ç‰ˆæœ¬å…¼å®¹æ€§
    - è¯Šæ–­ç‰ˆæœ¬ç›¸å…³çš„ bug
    - æ£€æŸ¥é›†ç¾¤ç‰ˆæœ¬ä¸€è‡´æ€§
    - è§„åˆ’å‡çº§å‰çš„è¯„ä¼°

    ä½¿ç”¨åœºæ™¯:
    - å‡çº§å‰æ£€æŸ¥
    - ç‰ˆæœ¬ä¸ä¸€è‡´é—®é¢˜
    - æ–°åŠŸèƒ½å…¼å®¹æ€§éªŒè¯

    å‚æ•°:
        node_name: å¯é€‰çš„èŠ‚ç‚¹åç§°ã€‚
                  ç•™ç©ºæ£€æŸ¥æ‰€æœ‰èŠ‚ç‚¹ï¼Œ
                  æä¾›èŠ‚ç‚¹ååªæ£€æŸ¥è¯¥èŠ‚ç‚¹

    è¿”å›:
        JSON æ ¼å¼çš„ç‰ˆæœ¬ä¿¡æ¯ï¼ŒåŒ…å«:
        - ovn_version: OVN ç‰ˆæœ¬å·
        - ovs_version: OVS ç‰ˆæœ¬å·
        - nodes: å„èŠ‚ç‚¹çš„ç‰ˆæœ¬åˆ—è¡¨
        - consistency_check: ç‰ˆæœ¬ä¸€è‡´æ€§æ£€æŸ¥

    ç¤ºä¾‹è¾“å‡º:
    {
        "ovn_version": "22.03.0",
        "ovs_version": "2.17.0",
        "nodes": {
            "node-1": {"ovn": "22.03.0", "ovs": "2.17.0"},
            "node-2": {"ovn": "22.03.0", "ovs": "2.17.0"}
        },
        "consistency_check": {
            "consistent": true,
            "message": "æ‰€æœ‰èŠ‚ç‚¹ç‰ˆæœ¬ä¸€è‡´"
        }
    }
    """
    result = await collect_ovn_version(
        node_name=node_name if node_name else None
    )

    return json.dumps(result, ensure_ascii=False, indent=2)
\```

### æ­¥éª¤ 4: æ³¨å†Œåˆ°å·¥å…·é›†

**æ–‡ä»¶**: `kube_ovn_checker/analyzers/tools/__init__.py`

\```python
# åœ¨æ–‡ä»¶åº•éƒ¨çš„å·¥å…·åˆ—è¡¨ä¸­æ·»åŠ 
ALL_TOOLS = [
    # ... ç°æœ‰å·¥å…· ...
    collect_ovn_version_tool,  # â† æ·»åŠ æ–°å·¥å…·
]
\```

### æ­¥éª¤ 5: ç¼–å†™å•å…ƒæµ‹è¯•

**æ–‡ä»¶**: `tests/test_collect_ovn_version.py`

\```python
import pytest
from kube_ovn_checker.analyzers.tools import collect_ovn_version_tool

@pytest.mark.asyncio
async def test_collect_ovn_version_all_nodes():
    """æµ‹è¯•æ”¶é›†æ‰€æœ‰èŠ‚ç‚¹çš„ OVN ç‰ˆæœ¬"""
    result = await collect_ovn_version_tool.invoke("")

    data = json.loads(result)
    assert data["success"] is True
    assert "ovn_version" in data["data"]
    assert "nodes" in data["data"]
    assert len(data["data"]["nodes"]) > 0

@pytest.mark.asyncio
async def test_collect_ovn_version_single_node():
    """æµ‹è¯•æ”¶é›†å•ä¸ªèŠ‚ç‚¹çš„ OVN ç‰ˆæœ¬"""
    result = await collect_ovn_version_tool.invoke("node-1")

    data = json.loads(result)
    assert data["success"] is True
    assert "node-1" in data["data"]["nodes"]

@pytest.mark.asyncio
async def test_collect_ovn_version_invalid_node():
    """æµ‹è¯•æ— æ•ˆèŠ‚ç‚¹åç§°"""
    result = await collect_ovn_version_tool.invoke("invalid-node")

    data = json.loads(result)
    assert data["success"] is False
    assert "error" in data
\```

### æ­¥éª¤ 6: è¿è¡Œæµ‹è¯•

\```bash
# è¿è¡Œæ–°æµ‹è¯•
pytest tests/test_collect_ovn_version.py -v

# è¿è¡Œæ‰€æœ‰æµ‹è¯•ç¡®ä¿æ²¡æœ‰ç ´å
pytest tests/ -v
\```

### æ­¥éª¤ 7: æ›´æ–°æ–‡æ¡£

**æ–‡ä»¶**: `docs/architecture/tool-system.md`

åœ¨å·¥å…·åˆ—è¡¨ä¸­æ·»åŠ :

\```markdown
### OVN/OVS å·¥å…·

| å·¥å…· | æè¿° | ç”¨é€” |
|-----|------|------|
| `collect_ovn_version` | æ”¶é›† OVN ç‰ˆæœ¬ | ç‰ˆæœ¬æ£€æŸ¥ã€å‡çº§è§„åˆ’ |
| `collect_ovn_nbctl` | OVN åŒ—å‘ DB | é…ç½®éªŒè¯ |
\```

### æ­¥éª¤ 8: æäº¤ PR

è§ [contributing.md](contributing.md)

## å·¥å…·å¼€å‘æœ€ä½³å®è·µ

### 1. å‘½åè§„èŒƒ

**å‡½æ•°å‘½å**:
\```python
# âœ… å¥½çš„å‘½å
async def collect_pod_logs(...)
async def collect_subnet_status(...)

# âŒ ä¸å¥½çš„å‘½å
async def get_logs(...)
async def check_subnet(...)
\```

**å·¥å…·å‘½å**:
\```python
# âœ… å¥½çš„å‘½å
collect_pod_logs_tool
collect_ovn_version_tool

# âŒ ä¸å¥½çš„å‘½å
pod_logs_tool
ovn_version
\```

### 2. é”™è¯¯å¤„ç†

\```python
# âœ… å¥½çš„é”™è¯¯å¤„ç†
async def collect_something(param: str) -> Dict:
    try:
        result = await do_something(param)
        return {
            "success": True,
            "data": result
        }
    except SpecificError as e:
        return {
            "success": False,
            "error": f"Specific error: {e}"
        }
    except Exception as e:
        logger.exception("Unexpected error")
        return {
            "success": False,
            "error": f"Unexpected error: {e}"
        }

# âŒ ä¸å¥½çš„é”™è¯¯å¤„ç†
async def collect_something(param: str):
    return do_something(param)  # å¯èƒ½æŠ›å‡ºæœªæ•è·çš„å¼‚å¸¸
\```

### 3. æ–‡æ¡£å­—ç¬¦ä¸²

\```python
# âœ… å¥½çš„æ–‡æ¡£å­—ç¬¦ä¸²
@tool
async def my_tool(param: str) -> str:
    """å·¥å…·ç®€çŸ­æè¿°ï¼ˆä¸€å¥è¯ï¼‰

    è¯¦ç»†è¯´æ˜å·¥å…·çš„åŠŸèƒ½ã€ä½¿ç”¨åœºæ™¯å’Œæ³¨æ„äº‹é¡¹ã€‚

    ç”¨é€”:
    - åœºæ™¯ 1
    - åœºæ™¯ 2
    - åœºæ™¯ 3

    å‚æ•°:
        param1: å‚æ•°1çš„è¯´æ˜
        param2: å‚æ•°2çš„è¯´æ˜ï¼Œé»˜è®¤å€¼

    è¿”å›:
        JSON æ ¼å¼ï¼ŒåŒ…å«:
        - field1: å­—æ®µ1è¯´æ˜
        - field2: å­—æ®µ2è¯´æ˜

    ç¤ºä¾‹:
        è¾“å…¥: param1="value"
        è¾“å‡º: {"field1": "result"}
    """
    pass

# âŒ ä¸å¥½çš„æ–‡æ¡£å­—ç¬¦ä¸²
@tool
async def my_tool(param: str) -> str:
    """åšæŸäº‹"""
    pass
\```

### 4. å¼‚æ­¥å¹¶å‘

\```python
# âœ… å¥½çš„å¹¶å‘æ¨¡å¼
async def collect_multiple(items: List[str]):
    tasks = [collect_one(item) for item in items]
    results = await asyncio.gather(*tasks, return_exceptions=True)

    # å¤„ç†ç»“æœå’Œå¼‚å¸¸
    for i, result in enumerate(results):
        if isinstance(result, Exception):
            logger.error(f"Error collecting {items[i]}: {result}")
        else:
            logger.info(f"Collected {items[i]}")

    return results

# âŒ ä¸å¥½çš„ä¸²è¡Œæ¨¡å¼
async def collect_multiple(items: List[str]):
    results = []
    for item in items:
        result = await collect_one(item)  # ä¸²è¡Œï¼Œæ…¢
        results.append(result)
    return results
\```

### 5. å‚æ•°éªŒè¯

\```python
from pydantic import BaseModel, Field, validator

class ToolInput(BaseModel):
    """å·¥å…·è¾“å…¥å‚æ•°"""

    pod_name: str = Field(..., min_length=1, description="Pod åç§°")
    namespace: str = Field(..., description="å‘½åç©ºé—´")
    tail_lines: int = Field(
        default=100,
        ge=1,
        le=10000,
        description="æ—¥å¿—è¡Œæ•°"
    )

    @validator("namespace")
    def validate_namespace(cls, v):
        if not v:
            raise ValueError("namespace ä¸èƒ½ä¸ºç©º")
        return v
\```

## å·¥å…·æµ‹è¯•æ¨¡æ¿

### åŸºç¡€æµ‹è¯•

\```python
import pytest
import json
from kube_ovn_checker.analyzers.tools import my_tool

class TestMyTool:
    """my_tool çš„æµ‹è¯•å¥—ä»¶"""

    @pytest.mark.asyncio
    async def test_basic_functionality(self):
        """æµ‹è¯•åŸºæœ¬åŠŸèƒ½"""
        result = await my_tool.invoke("test-param")
        data = json.loads(result)
        assert data["success"] is True

    @pytest.mark.asyncio
    async def test_error_handling(self):
        """æµ‹è¯•é”™è¯¯å¤„ç†"""
        result = await my_tool.invoke("")
        data = json.loads(result)
        assert data["success"] is False
        assert "error" in data

    @pytest.mark.asyncio
    async def test_return_format(self):
        """æµ‹è¯•è¿”å›æ ¼å¼"""
        result = await my_tool.invoke("test")
        data = json.loads(result)
        assert "success" in data
        assert "data" in data or "error" in data
\```

### Mock æµ‹è¯•

\```python
from unittest.mock import AsyncMock, patch

@pytest.mark.asyncio
async def test_with_mock():
    """ä½¿ç”¨ Mock æµ‹è¯•"""
    with patch(
        "kube_ovn_checker.collectors.k8s_client.exec_cmd",
        new_callable=AsyncMock
    ) as mock_exec:
        mock_exec.return_value = "mocked output"

        result = await my_tool.invoke("test")
        data = json.loads(result)

        assert data["success"] is True
        mock_exec.assert_called_once()
\```

## å¸¸è§é—®é¢˜

### Q1: å·¥å…·æ²¡æœ‰è¢« Agent ä½¿ç”¨ï¼Ÿ

**åŸå› **: LLM å¯èƒ½ä¸çŸ¥é“å·¥å…·çš„å­˜åœ¨æˆ–ä¸çŸ¥é“ä½•æ—¶ä½¿ç”¨

**è§£å†³æ–¹æ¡ˆ**:
1. æ”¹è¿›å·¥å…·æè¿°ï¼ˆdocstringï¼‰
2. æ·»åŠ æ›´å¤šä½¿ç”¨åœºæ™¯ç¤ºä¾‹
3. åœ¨ç³»ç»Ÿæç¤ºè¯ä¸­æåŠ

### Q2: å·¥å…·æ‰§è¡Œè¶…æ—¶ï¼Ÿ

**åŸå› **: kubectl å‘½ä»¤æ‰§è¡Œæ—¶é—´è¿‡é•¿

**è§£å†³æ–¹æ¡ˆ**:
\```python
async def my_tool():
    try:
        result = await asyncio.wait_for(
            long_running_command(),
            timeout=30.0
        )
    except asyncio.TimeoutError:
        return {"success": False, "error": "Timeout"}
\```

### Q3: å·¥å…·è¿”å›æ ¼å¼ LLM æ— æ³•ç†è§£ï¼Ÿ

**åŸå› **: è¿”å›çš„ JSON æ ¼å¼ä¸æ¸…æ™°

**è§£å†³æ–¹æ¡ˆ**:
\```python
# ä½¿ç”¨æ¸…æ™°çš„å­—æ®µåå’Œç»“æ„åŒ–æ•°æ®
return json.dumps({
    "summary": "ä¸€å¥è¯æ€»ç»“",
    "details": {
        "key1": "value1",
        "key2": "value2"
    },
    "recommendations": [
        "å»ºè®®1",
        "å»ºè®®2"
    ]
}, indent=2)
\```

## æ€»ç»“

æ·»åŠ æ–°å·¥å…·çš„æ­¥éª¤ï¼š

1. âœ… å®ç°æ”¶é›†å‡½æ•°
2. âœ… åˆ›å»º Pydantic Schema
3. âœ… åˆ›å»º LangChain Tool
4. âœ… æ³¨å†Œåˆ°å·¥å…·é›†
5. âœ… ç¼–å†™å•å…ƒæµ‹è¯•
6. âœ… æ›´æ–°æ–‡æ¡£
7. âœ… æäº¤ PR

éµå¾ªæœ€ä½³å®è·µå¯ä»¥ç¡®ä¿å·¥å…·è´¨é‡é«˜ã€æ˜“ç»´æŠ¤ã€LLM æ˜“ç†è§£ã€‚
```

---

## ğŸ¯ å®æ–½è®¡åˆ’å’Œä¼˜å…ˆçº§

### é˜¶æ®µ 1: æ ¸å¿ƒç”¨æˆ·æ–‡æ¡£ (P0, ç¬¬ 1-2 å‘¨)

**ç›®æ ‡**: è®©ç”¨æˆ·èƒ½å¤ŸæˆåŠŸå®‰è£…å¹¶ä½¿ç”¨å·¥å…·

| æ–‡æ¡£ | ä¼˜å…ˆçº§ | é¢„è®¡æ—¶é—´ | è´Ÿè´£äºº |
|-----|--------|---------|--------|
| æ›´æ–° `.env.example` | P0 | 1 å¤© | - |
| `quick-start.md` | P0 | 2 å¤© | - |
| `installation.md` | P0 | 2 å¤© | - |
| `configuration.md` | P0 | 2 å¤© | - |
| `troubleshooting.md` | P0 | 3 å¤© | - |

**éªŒè¯æ ‡å‡†**:
- [ ] æ–°ç”¨æˆ·èƒ½åœ¨ 15 åˆ†é’Ÿå†…å®Œæˆå®‰è£…
- [ ] èƒ½å¤ŸæˆåŠŸè¿è¡Œç¬¬ä¸€æ¬¡è¯Šæ–­
- [ ] èƒ½å¤Ÿè§£å†³ Top 5 å¸¸è§é”™è¯¯

---

### é˜¶æ®µ 2: æ¶æ„æ–‡æ¡£ (P1, ç¬¬ 3-4 å‘¨)

**ç›®æ ‡**: å¸®åŠ©ç”¨æˆ·ç†è§£ç³»ç»Ÿè®¾è®¡

| æ–‡æ¡£ | ä¼˜å…ˆçº§ | é¢„è®¡æ—¶é—´ | è´Ÿè´£äºº |
|-----|--------|---------|--------|
| ç³»ç»Ÿæ¶æ„å›¾ | P0 | 2 å¤© | - |
| `overview.md` | P0 | 2 å¤© | - |
| `building-blocks.md` | P0 | 3 å¤© | - |
| `runtime-view.md` | P0 | 3 å¤© | - |
| `diagnostic-workflow.md` | P1 | 2 å¤© | - |

**éªŒè¯æ ‡å‡†**:
- [ ] ç”¨æˆ·èƒ½ç†è§£ T0/T1/T2 åˆ†å±‚
- [ ] ç”¨æˆ·èƒ½ç†è§£ Agent å†³ç­–æµç¨‹
- [ ] æ¶æ„å›¾æ¸…æ™°å‡†ç¡®

---

### é˜¶æ®µ 3: å¼€å‘è€…æ–‡æ¡£ (P1, ç¬¬ 5-6 å‘¨)

**ç›®æ ‡**: é™ä½è´¡çŒ®é—¨æ§›

| æ–‡æ¡£ | ä¼˜å…ˆçº§ | é¢„è®¡æ—¶é—´ | è´Ÿè´£äºº |
|-----|--------|---------|--------|
| `development-setup.md` | P0 | 2 å¤© | - |
| `code-structure.md` | P0 | 2 å¤© | - |
| `adding-tools.md` | P0 | 3 å¤© | - |
| `testing.md` | P1 | 2 å¤© | - |
| `api-reference.md` | P1 | 3 å¤© | - |

**éªŒè¯æ ‡å‡†**:
- [ ] æ–°å¼€å‘è€…èƒ½åœ¨ 2 å°æ—¶å†…è¿è¡Œä»£ç 
- [ ] èƒ½å¤ŸæˆåŠŸæ·»åŠ ä¸€ä¸ªæ–°å·¥å…·
- [ ] æµ‹è¯•è¦†ç›–ç‡ > 80%

---

### é˜¶æ®µ 4: æ¡ˆä¾‹å’Œä¼˜åŒ– (P2, ç¬¬ 7-8 å‘¨)

**ç›®æ ‡**: æå‡ç”¨æˆ·ä½“éªŒ

| å†…å®¹ | ä¼˜å…ˆçº§ | é¢„è®¡æ—¶é—´ | è´Ÿè´£äºº |
|-----|--------|---------|--------|
| çœŸå®æ¡ˆä¾‹åº“ (5+ æ¡ˆä¾‹) | P1 | 5 å¤© | - |
| `faq.md` | P1 | 2 å¤© | - |
| è§†é¢‘æ•™ç¨‹ | P2 | 3 å¤© | - |
| å›½é™…åŒ– (è‹±æ–‡ç‰ˆ) | P2 | 5 å¤© | - |

---

## ğŸ“Š æˆåŠŸæŒ‡æ ‡

### ç”¨æˆ·ä½“éªŒæŒ‡æ ‡

| æŒ‡æ ‡ | å½“å‰ | ç›®æ ‡ | æµ‹é‡æ–¹æ³• |
|-----|------|------|---------|
| å®‰è£…æˆåŠŸç‡ | æœªçŸ¥ | > 90% | ç”¨æˆ·åé¦ˆ |
| é¦–æ¬¡è¯Šæ–­æˆåŠŸç‡ | æœªçŸ¥ | > 85% | ç”¨æˆ·åé¦ˆ |
| é”™è¯¯è‡ªåŠ©è§£å†³ç‡ | æœªçŸ¥ | > 70% | GitHub Issues ç»Ÿè®¡ |
| å¹³å‡é—®é¢˜è§£å†³æ—¶é—´ | æœªçŸ¥ | < 15 åˆ†é’Ÿ | ç”¨æˆ·è°ƒç ” |

### æ–‡æ¡£è´¨é‡æŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | æµ‹é‡æ–¹æ³• |
|-----|------|---------|
| æ–‡æ¡£è¦†ç›–ç‡ | 100% | æ‰€æœ‰åŠŸèƒ½éƒ½æœ‰æ–‡æ¡£ |
| ç¤ºä¾‹å®Œæ•´æ€§ | æ¯åŠŸèƒ½ 1+ | ä»£ç ç¤ºä¾‹ç»Ÿè®¡ |
| é“¾æ¥æœ‰æ•ˆæ€§ | 100% | è‡ªåŠ¨åŒ–æ£€æŸ¥ |
| å‘½ä»¤å‡†ç¡®æ€§ | 100% | æ‰‹åŠ¨éªŒè¯ |

### å¼€å‘è€…ä½“éªŒæŒ‡æ ‡

| æŒ‡æ ‡ | ç›®æ ‡ | æµ‹é‡æ–¹æ³• |
|-----|------|---------|
| ä¸Šæ‰‹æ—¶é—´ | < 2 å°æ—¶ | æ–°å¼€å‘è€…åé¦ˆ |
| æ·»åŠ å·¥å…·æ—¶é—´ | < 4 å°æ—¶ | è´¡çŒ®ç»Ÿè®¡ |
| PR åˆ°åˆå¹¶æ—¶é—´ | < 3 å¤© | GitHub ç»Ÿè®¡ |

---

## ğŸ¤ éœ€è¦æ¾„æ¸…çš„é—®é¢˜

åœ¨å¼€å§‹å®æ–½å‰ï¼Œéœ€è¦ç¡®è®¤ä»¥ä¸‹å…³é”®é—®é¢˜ï¼š

### é˜»å¡é—®é¢˜ (P0)

1. **å·¥å…·çš„åªè¯»è¾¹ç•Œ**
   - é—®é¢˜: å·¥å…·æ˜¯å¦çœŸçš„å®Œå…¨åªè¯»ï¼Ÿ
   - éœ€æ±‚: å®¡æŸ¥æ‰€æœ‰ 26 ä¸ªå·¥å…·çš„å®ç°
   - å½±å“: å®‰å…¨æ–‡æ¡£å’Œç”¨æˆ·ä¿¡ä»»

2. **LLM æ•°æ®éšç§**
   - é—®é¢˜: å“ªäº›æ•°æ®ä¼šå‘é€ç»™ LLMï¼Ÿ
   - éœ€æ±‚: æ˜ç¡®æ•°æ®è„±æ•ç­–ç•¥
   - å½±å“: éšç§æ”¿ç­–å’Œåˆè§„è¯´æ˜

3. **å¹¶å‘å®‰å…¨æ€§**
   - é—®é¢˜: å¤šä¸ªè¯Šæ–­æ˜¯å¦å¯ä»¥åŒæ—¶è¿è¡Œï¼Ÿ
   - éœ€æ±‚: éªŒè¯æ˜¯å¦æœ‰å…±äº«çŠ¶æ€
   - å½±å“: æ€§èƒ½æ–‡æ¡£å’Œéƒ¨ç½²å»ºè®®

### é‡è¦é—®é¢˜ (P1)

4. **æ”¯æŒçš„ LLM æä¾›å•†**
   - é—®é¢˜: é™¤äº† OpenAIï¼Œè¿˜æ”¯æŒå“ªäº›ï¼Ÿ
   - éœ€æ±‚: æµ‹è¯•å…¼å®¹æ€§
   - å½±å“: é…ç½®æ–‡æ¡£

5. **æ€§èƒ½åŸºå‡†**
   - é—®é¢˜: ä¸åŒè§„æ¨¡é›†ç¾¤çš„è€—æ—¶ï¼Ÿ
   - éœ€æ±‚: è¿è¡ŒåŸºå‡†æµ‹è¯•
   - å½±å“: æ€§èƒ½æ–‡æ¡£

---

## ğŸ“ æ–‡æ¡£å·¥å…·å’ŒåŸºç¡€è®¾æ–½

### æ¨èå·¥å…·æ ˆ

**ä¸»æ–‡æ¡£ç³»ç»Ÿ**: MkDocs + Material Theme

**ä¼˜åŠ¿**:
- âœ… ç®€å•æ˜“ç”¨ï¼ŒMarkdown åŸç”Ÿ
- âœ… ç¾è§‚ç°ä»£ï¼Œæ”¯æŒä¸­æ–‡
- âœ… å†…ç½®æœç´¢
- âœ… è‡ªåŠ¨éƒ¨ç½²åˆ° GitHub Pages

**é…ç½®æ–‡ä»¶** (`mkdocs.yml`):

\```yaml
site_name: Kube-OVN Checker æ–‡æ¡£
site_description: LLM é©±åŠ¨çš„ Kube-OVN ç½‘ç»œè¯Šæ–­å·¥å…·
theme:
  name: material
  language: zh
  palette:
    - scheme: default
      primary: indigo
      accent: indigo

nav:
  - é¦–é¡µ: index.md
  - ç”¨æˆ·æŒ‡å—:
      - å¿«é€Ÿå¼€å§‹: user-guide/quick-start.md
      - å®‰è£…æŒ‡å—: user-guide/installation.md
      - é…ç½®æŒ‡å—: user-guide/configuration.md
      - è¯Šæ–­åŸºç¡€: user-guide/diagnosis-basics.md
      - æ•…éšœæ’é™¤: user-guide/troubleshooting.md
      - å¸¸è§é—®é¢˜: user-guide/faq.md
  - æ¶æ„æ–‡æ¡£:
      - ç³»ç»Ÿæ¦‚è¿°: architecture/overview.md
      - æ„å»ºå—: architecture/building-blocks.md
      - è¿è¡Œæ—¶è§†å›¾: architecture/runtime-view.md
  - å¼€å‘è€…æ–‡æ¡£:
      - å¼€å‘ç¯å¢ƒ: developer-guide/development-setup.md
      - ä»£ç ç»“æ„: developer-guide/code-structure.md
      - æ·»åŠ å·¥å…·: developer-guide/adding-tools.md

plugins:
  - search:
      lang:
        - zh
        - en
  - mkdocstrings:
      handlers:
        python:
          paths: [kube_ovn_checker]
          options:
            show_source: true

markdown_extensions:
  - pymdownx.highlight
  - pymdownx.superfences
  - admonition
  - pymdownx.details
\```

### å›¾è¡¨å·¥å…·

**Mermaid.js** (æ¨è)

\```markdown
\```mermaid
graph TD
    A[å¼€å§‹] --> B{åˆ¤æ–­}
    B -->|æ˜¯| C[æ“ä½œ1]
    B -->|å¦| D[æ“ä½œ2]
\```
\```

**ä¼˜åŠ¿**:
- ä»£ç ç‰ˆæœ¬æ§åˆ¶
- æ˜“äºç¼–è¾‘
- Markdown åŸç”Ÿæ”¯æŒ

### æ–‡æ¡£æ¨¡æ¿

è§ä¸Šè¿°å„æ–‡æ¡£çš„è¯¦ç»†æ¨¡æ¿

---

## ğŸ“š å‚è€ƒèµ„æº

### ä¼˜ç§€æ–‡æ¡£æ¡ˆä¾‹

- [FastAPI æ–‡æ¡£](https://fastapi.tiangolo.com/) - ç”¨æˆ·å‹å¥½çš„å…¸èŒƒ
- [Kubernetes æ–‡æ¡£](https://kubernetes.io/docs/) - ä»»åŠ¡å¯¼å‘ç»„ç»‡
- [LangChain æ–‡æ¡£](https://python.langchain.com/) - æ¸…æ™°çš„æ¦‚å¿µè¯´æ˜

### æ–‡æ¡£æ ‡å‡†

- [DiÃ¡taxis æ¡†æ¶](https://diataxis.fr/) - æ–‡æ¡£åˆ†ç±»æ¡†æ¶
- [arc42 æ¨¡æ¿](https://arc42.org/) - æ¶æ„æ–‡æ¡£æ ‡å‡†
- [Google æ–‡æ¡£é£æ ¼æŒ‡å—](https://developers.google.com/tech-writing/one) - å†™ä½œè§„èŒƒ

### å·¥å…·æ–‡æ¡£

- [MkDocs Material](https://squidfunk.github.io/mkdocs-material/)
- [Mermaid.js](https://mermaid.js.org/)
- [Sphinx](https://www.sphinx-doc.org/)

---

## âœ… æ£€æŸ¥æ¸…å•

### å‘å¸ƒå‰å¿…é¡»å®Œæˆ

- [ ] æ‰€æœ‰æ–‡æ¡£ä¸­çš„å‘½ä»¤éƒ½å¯ä»¥æ‰§è¡Œ
- [ ] æ‰€æœ‰ç¤ºä¾‹è¾“å‡ºéƒ½æ˜¯çœŸå®çš„
- [ ] æ‰€æœ‰é“¾æ¥éƒ½æœ‰æ•ˆ
- [ ] æ‰€æœ‰ä»£ç ç‰‡æ®µéƒ½æœ‰è¯­æ³•é«˜äº®
- [ ] æ‰€æœ‰å›¾è¡¨éƒ½æ¸…æ™°å¯è§
- [ ] è‡³å°‘ 3 ä¸ªçœŸå®æ¡ˆä¾‹
- [ ] FAQ è¦†ç›– Top 10 é—®é¢˜
- [ ] æ¶æ„å›¾å®Œæ•´å‡†ç¡®

### å¯é€‰ä¼˜åŒ–

- [ ] è§†é¢‘æ•™ç¨‹
- [ ] äº’åŠ¨å¼ç¤ºä¾‹
- [ ] å›½é™…åŒ–ï¼ˆè‹±æ–‡ç‰ˆï¼‰
- [ ] PDF ç‰ˆæœ¬
- [ ] ç¦»çº¿æ–‡æ¡£

---

## ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³å¼€å§‹ï¼ˆæœ¬å‘¨ï¼‰

1. æ›´æ–° `.env.example` æ·»åŠ è¯¦ç»†æ³¨é‡Š
2. åˆ›å»º `troubleshooting.md` è§£å†³ Top 5 é—®é¢˜
3. åˆ›å»º `quick-start.md` 5 åˆ†é’ŸæŒ‡å—

### ä¸¤å‘¨å†…å®Œæˆ

4. å®Œæˆæ‰€æœ‰ P0 ç”¨æˆ·æ–‡æ¡£
5. åˆ›å»ºç³»ç»Ÿæ¶æ„å›¾
6. æ”¶é›† 3 ä¸ªçœŸå®æ¡ˆä¾‹

### ä¸€ä¸ªæœˆå†…å®Œæˆ

7. å®Œæˆæ‰€æœ‰ P0 å’Œ P1 æ–‡æ¡£
8. å»ºç«‹æ–‡æ¡£ç«™ç‚¹ï¼ˆMkDocsï¼‰
9. å‘å¸ƒæ–‡æ¡£ v1.0

---

**è®¡åˆ’å®Œæˆæ—¶é—´**: 2026-01-11
**é¢„è®¡å®Œæˆæ—¶é—´**: 2026-03-11 (8 å‘¨)
**ä¸‹æ¬¡å®¡æŸ¥**: å®Œæˆé˜¶æ®µ 1 åï¼ˆ2 å‘¨ï¼‰

